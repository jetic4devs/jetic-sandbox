{
  "type" : "BEANS",
  "properties" : {
    "codeGroovy" : "beans {\n    myString = 'Hello World!'\n\n    myProcessor = processor { \n        it.in.body = 'Hello from Groovy'\n    }\n\n    myPredicate = predicate {\n        it.in.body != null\n    }\n}",
    "codeJava" : "@BindToRegistry\npublic Processor sendEmail() {\n    return exchange -> {\n        String API_KEY = (String)exchange.getProperty(\"sendGridApiKey\");\n        String subject = (String)exchange.getProperty(\"emailSubject\");\n        String toEmail = (String)exchange.getProperty(\"emailRecipient\");\n\t\t\t\tString toName = (String)exchange.getProperty(\"fname\") + \" \" + (String)exchange.getProperty(\"lname\");\n\n        Mail mail = new Mail();\n        \n        Email fromEmail = new Email();\n        fromEmail.setName(\"Convey911 Support\");\n        fromEmail.setEmail(\"support@convey911.com\");\n        mail.setFrom(fromEmail);\n\n        mail.setSubject(subject);\n\n        Personalization personalization = new Personalization();\n        Email to = new Email();\n        to.setName(toName);\n        to.setEmail(toEmail);\n        personalization.addTo(to);\n\n        mail.addPersonalization(personalization);        \n\n        Content content = new Content();\n        content.setType(\"text/plain\");\n        content.setValue((String)exchange.getProperty(\"emailBodyText\"));\n        content.setType(\"text/html\");\n        content.setValue((String)exchange.getProperty(\"emailBodyHtml\"));\n        mail.addContent(content);\n\n        TrackingSettings trackingSettings = new TrackingSettings();\n        ClickTrackingSetting clickTrackingSetting = new ClickTrackingSetting();\n        clickTrackingSetting.setEnable(true);\n        clickTrackingSetting.setEnableText(true);\n        trackingSettings.setClickTrackingSetting(clickTrackingSetting);\n        OpenTrackingSetting openTrackingSetting = new OpenTrackingSetting();\n        openTrackingSetting.setEnable(true);\n        openTrackingSetting.setSubstitutionTag(\"Optional tag to replace with the open image in the body of the message\");\n        trackingSettings.setOpenTrackingSetting(openTrackingSetting);\n        mail.setTrackingSettings(trackingSettings);\n    \n        Email replyTo = new Email();\n        replyTo.setName(\"Convey911 Support\");\n        replyTo.setEmail(\"support@convey911.com\");\n        mail.setReplyTo(replyTo);\n        \n        SendGrid sg = new SendGrid(API_KEY);\n        //sg.addRequestHeader(\"X-Mock\", \"true\");\n    \n        Request request = new Request();\n        request.setMethod(Method.POST);\n        request.setEndpoint(\"mail/send\");\n        request.setBody(mail.build());\n    \n        Response response = sg.api(request);       \n\n        exchange.setProperty(\"mailResponse\", response.getBody()); \n        exchange.setProperty(\"emailSent\", response.getStatusCode());                \n    };\n}",
    "importsJava" : "import org.apache.camel.CamelContext;\nimport org.apache.camel.BindToRegistry;\nimport org.apache.camel.Processor;\nimport com.sendgrid.Method;\nimport com.sendgrid.Request;\nimport com.sendgrid.Response;\nimport com.sendgrid.SendGrid;\nimport com.sendgrid.helpers.mail.Mail;\nimport com.sendgrid.helpers.mail.objects.*;\nimport java.io.IOException;",
    "type" : "Java"
  },
  "id" : "4e021d57-2b93-4eab-8ecd-1e4ea641a24b",
  "name" : "SendGridEmail",
  "description" : "",
  "createdAt" : "2023-10-04T18:05:21.321190238",
  "updatedAt" : "2023-10-04T18:05:21.321191053",
  "createdBy" : "612c1b37-217d-49f9-b344-54b8af760f6a",
  "updatedBy" : "612c1b37-217d-49f9-b344-54b8af760f6a"
}