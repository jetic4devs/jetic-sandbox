{
  "revision" : 1298,
  "compression" : false,
  "dataAnalyzer" : true,
  "replicas" : 1,
  "openApiUuid" : "1e4b5b38-64b7-4cc3-9eed-9f76296913e6",
  "currentProfileUuid" : "ae5301ac-5200-4b54-876c-b514515feb02",
  "parameterGroupUuids" : [ "e1d81a6a-655e-42ff-8288-6b0891abe7b0", "3dacce84-b8c8-4759-8bfa-355c8cf6acd6", "ca06b01a-b205-4b2b-9e9d-9f49614e7e94", "c9a8ecf3-391c-4a06-bdc0-68a1a504fdd9", "d0bfc552-bb3f-430b-ad40-8d2d80efe8a7", "351ac858-4e6b-4902-9090-0be62c4dc9e0", "c08652a3-d6b0-49e8-8f94-a7b6845afe60" ],
  "repoResourceUuids" : [ "c0c942f5-065d-48d6-88af-e7292dd22872", "eddb9cf2-828c-4bf6-a038-93128340a0c2", "49163dae-d547-4205-823b-baa9bb312523", "07e34d9c-7cea-4532-94e6-7da0f6bddeb3", "e859d27c-054e-489d-96ef-1338b179fde7", "2d21c0b9-a829-4420-84e6-67d34aaf6026", "fedc2ba8-c348-4a92-a89c-844badda8f1f", "71e48dda-80e9-4034-af48-cf39a9a10938", "60b1161c-74ee-4cd8-96a1-0055c90271c1", "1872a943-2a9b-4513-8739-06e95090b977", "f50d9293-f6bf-47b6-b21e-4cfda6eee3c4", "55882383-5e69-44b0-a3ac-12785e306303", "9fb5f9ac-54fb-4ea4-b9d6-a3f95d92021b", "05649865-0c5a-4bfd-bddb-046f69383940", "ef4aff81-4b71-4efc-9e73-b38e2c43b18d", "a1201a9d-569b-43a9-ad45-945750fa830b", "95a31431-529a-48a1-a5a9-6be52b6235ad", "a1057428-1531-40a8-a129-ed27382e947f", "3b5aa833-0eaa-4cb9-8ce8-ca97eac74110", "0d41f9ca-58b0-434f-a68e-5855e59f3249", "17e7ca54-4247-4e9c-ba30-d078e3ac407a", "38657aaf-c7a4-4a04-9321-bb750c2e67b5" ],
  "routeDefinitions" : [ {
    "id" : null,
    "camelRouteId" : "route-1",
    "enabled" : true,
    "routeId" : 1,
    "route" : [ {
      "name" : "getRequest",
      "nodeId" : "09e9170c-2897-4ecb-a465-6959f5f45d7c",
      "description" : "getMessages",
      "properties" : {
        "_type" : "restApi",
        "active" : true,
        "camelGroup" : "rest",
        "consumes" : "application/json",
        "endpoint" : "/api/v1/messages",
        "method" : "get",
        "name" : "getRequest",
        "operationName" : "getMessages",
        "produces" : "application/json",
        "requestmethod" : "GET",
        "url" : ""
      },
      "_type" : "restApi",
      "kameletPropertiesUrl" : "?consumes=application/json&endpoint=/api/v1/messages&method=get&operationName=getMessages&produces=application/json&requestmethod=GET"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "cc824790-dfe6-4a4e-a9b7-a61cbe3fc74f",
      "description" : "Validate JWT",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "c4fa3950-2b14-4336-9cb7-417b0c74830a",
      "description" : "Validate Request",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()"
    }, {
      "name" : "setProperties",
      "nodeId" : "48823e71-1557-42b8-880d-35dc9e61272a",
      "description" : "Get Request Props",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "Header",
          "propertyName" : "agencyId",
          "propertyValue" : "x-agency-id",
          "uuid" : "617b5940-19ae-45d6-a65d-064297954d9c"
        }, {
          "language" : "Header",
          "propertyName" : "conversationId",
          "propertyValue" : "conversationId",
          "uuid" : "f97bfca7-c34c-4a2a-b144-a6410df5c7f0"
        } ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?agencyId=x-agency-id&conversationId=conversationId&addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "0637962c-e9ad-4276-a9a6-eb0ad940ab1f",
      "description" : "Remove Headers",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".removeHeaders(\"*\", \"x-*\", \"Authorization\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-*\", \"Authorization\")"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "d772f009-8695-41ad-a70f-e881c26838d4",
      "description" : "SQL Get Messages",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".to(\"velocity:messages.select.sql.vm?allowContextMapAll=true\")\n        \t.log(LoggingLevel.OFF, 'log', '${body}')\n        \t.to(\"sql:query?dataSource=#dsPostgres&OutputType=SelectList&useMessageBodyForSql=true\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.to(\"velocity:messages.select.sql.vm?allowContextMapAll=true\")\n        \t.log(LoggingLevel.OFF, 'log', '${body}')\n        \t.to(\"sql:query?dataSource=#dsPostgres&OutputType=SelectList&useMessageBodyForSql=true\")"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "187bae57-1646-4c69-b3ad-a7af06997e91",
      "description" : "Render Response",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".bean(\"renderResponse\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.bean(\"renderResponse\")"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-4",
    "enabled" : true,
    "routeId" : 2,
    "route" : [ {
      "name" : "getRequest",
      "nodeId" : "13e92a99-869a-4ece-80f3-ba0d25f883ad",
      "description" : "getMessageById",
      "properties" : {
        "_type" : "restApi",
        "active" : true,
        "camelGroup" : "rest",
        "consumes" : "application/json",
        "endpoint" : "/api/v1/messages/{messageId}",
        "method" : "get",
        "name" : "getRequest",
        "operationName" : "getMessageById",
        "produces" : "application/json",
        "requestmethod" : "GET",
        "url" : ""
      },
      "_type" : "restApi",
      "kameletPropertiesUrl" : "?consumes=application/json&endpoint=/api/v1/messages/{messageId}&method=get&operationName=getMessageById&produces=application/json&requestmethod=GET"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "10397c02-67c6-4d0d-8204-784a746a8f66",
      "description" : "Validate JWT",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "c456d270-5db6-4234-adc3-7f04442e7a7f",
      "description" : "Validate Request",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()"
    }, {
      "name" : "setProperties",
      "nodeId" : "43ab233e-42ce-46e6-94c0-852ab2dfb59e",
      "description" : "Set Message ID",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "Header",
          "propertyName" : "messageId",
          "propertyValue" : "messageId",
          "uuid" : "94f1ea74-ac0a-44b0-8bbb-2634b7aa4881"
        }, {
          "language" : "Header",
          "propertyName" : "agencyId",
          "propertyValue" : "x-agency-id",
          "uuid" : "99265219-eb3b-49ab-b1c6-9c2bbf955759"
        } ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?messageId=messageId&agencyId=x-agency-id&addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "e29c855f-2dd8-495c-ba7d-a790cc10ce4e",
      "description" : "SQL Get Message",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".to(\"velocity:messages.select.sql.vm?allowContextMapAll=true\")\n        \t.log(LoggingLevel.OFF, 'log', '${body}')\n        \t.to(\"sql:query?dataSource=#dsPostgres&OutputType=SelectOne&useMessageBodyForSql=true\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.to(\"velocity:messages.select.sql.vm?allowContextMapAll=true\")\n        \t.log(LoggingLevel.OFF, 'log', '${body}')\n        \t.to(\"sql:query?dataSource=#dsPostgres&OutputType=SelectOne&useMessageBodyForSql=true\")"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "bbb04697-afb8-4724-950e-6a9247f5d1a7",
      "description" : "Render Response",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".to(\"bean:renderResponse\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.to(\"bean:renderResponse\")"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-2",
    "enabled" : true,
    "routeId" : 3,
    "route" : [ {
      "name" : "postRequest",
      "nodeId" : "6a518cb6-1a52-42b2-b612-46ea9eebd3cb",
      "description" : "createMessage",
      "properties" : {
        "_type" : "restApi",
        "active" : true,
        "camelGroup" : "rest",
        "consumes" : "application/json",
        "endpoint" : "/api/v1/messages",
        "method" : "post",
        "name" : "postRequest",
        "operationName" : "createMessage",
        "produces" : "application/json",
        "requestmethod" : "POST",
        "url" : ""
      },
      "_type" : "restApi",
      "kameletPropertiesUrl" : "?consumes=application/json&endpoint=/api/v1/messages&method=post&operationName=createMessage&produces=application/json&requestmethod=POST"
    }, {
      "name" : "convertBodyTo",
      "nodeId" : "ca15f966-e3fd-4828-be6a-13bbed2a77da",
      "description" : "To String",
      "properties" : {
        "_type" : "convertBodyTo",
        "active" : true,
        "camelGroup" : "transform",
        "name" : "convertBodyTo",
        "targetClass" : "String.class",
        "url" : ""
      },
      "_type" : "convertBodyTo",
      "kameletPropertiesUrl" : "?targetClass=String.class"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "eb812b34-d7e6-4b75-818e-be6b2a896557",
      "description" : "Validate JWT",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "57336f97-332a-46d6-bac5-eb5e6bdd88bf",
      "description" : "Validate Request",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()"
    }, {
      "name" : "setProperties",
      "nodeId" : "8d102ea9-4871-4be8-8749-4bf1162159b2",
      "description" : "Get Request Props",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "JsonPath",
          "propertyName" : "body",
          "propertyValue" : "$.body",
          "uuid" : "6122abc7-e7b2-4a12-91a9-549259cee536"
        }, {
          "language" : "JsonPath",
          "propertyName" : "conversationId",
          "propertyValue" : "$.conversation_id",
          "uuid" : "6ba8ec28-d7e5-4d33-bef6-e0ed9e6ccfa1"
        }, {
          "language" : "JsonPath",
          "propertyName" : "direction",
          "propertyValue" : "$.direction",
          "uuid" : "508a329c-017b-4bd7-9ad8-0b6077eda196"
        }, {
          "language" : "JsonPath",
          "propertyName" : "language",
          "propertyValue" : "$.language",
          "uuid" : "b313f529-2d2e-4be0-a14b-396cbaa07bda"
        }, {
          "language" : "JsonPath",
          "propertyName" : "numMedia",
          "propertyValue" : "$.num_media",
          "uuid" : "31250461-aa21-4a04-9f01-1871cca51e3e"
        }, {
          "language" : "Header",
          "propertyName" : "agencyId",
          "propertyValue" : "x-agency-id",
          "uuid" : "94b7d436-36a3-4664-9f65-8393d22f725d"
        }, {
          "language" : "JsonPath",
          "propertyName" : "recipientId",
          "propertyValue" : "$.recipient_id",
          "uuid" : "633aa60f-2404-4641-9a4e-2a2d02b4346b"
        }, {
          "language" : "JsonPath",
          "propertyName" : "recipientNumber",
          "propertyValue" : "$.recipient_number",
          "uuid" : "b77463ac-36e5-4b29-9e83-1d2cc25a3e2d"
        }, {
          "language" : "Constant",
          "propertyName" : "operatorLanguage",
          "propertyValue" : "en",
          "uuid" : "66aac0c5-6d77-4a9a-9b0e-d34dba2f5d88"
        }, {
          "language" : "JsonPath",
          "propertyName" : "resourceId",
          "propertyValue" : "$.resource_id",
          "uuid" : "ca76888f-822d-47b5-a810-95eb609d2925"
        }, {
          "language" : "JsonPath",
          "propertyName" : "status",
          "propertyValue" : "$.status",
          "uuid" : "a3d0de01-d337-498f-af58-f939f74a6456"
        }, {
          "language" : "Simple",
          "propertyName" : "operatorLanguage",
          "propertyValue" : "{{convey.web.operatorLanguage}}",
          "uuid" : "8aa5a4a3-1f81-4451-9abf-47ea817c2633"
        }, {
          "language" : "JsonPath",
          "propertyName" : "source",
          "propertyValue" : "$.source",
          "uuid" : "8056a7c8-41b3-44b0-bf72-1a1526cfb1c5"
        }, {
          "language" : "JsonPath",
          "propertyName" : "createdAt",
          "propertyValue" : "$.created_at",
          "uuid" : "1e85b1c0-e233-4930-921e-d95fd02f12d1"
        }, {
          "language" : "JsonPath",
          "propertyName" : "recipientId",
          "propertyValue" : "$.recipient_id",
          "uuid" : "f8685933-d1f3-41ca-9a4e-6d560facd104"
        } ],
        "suppressExceptions" : true,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?body=$.body&conversationId=$.conversation_id&direction=$.direction&language=$.language&numMedia=$.num_media&agencyId=x-agency-id&recipientId=$.recipient_id&recipientNumber=$.recipient_number&operatorLanguage=en&resourceId=$.resource_id&status=$.status&operatorLanguage={{convey.web.operatorLanguage}}&source=$.source&createdAt=$.created_at&recipientId=$.recipient_id&addNamespaces=false&suppressExceptions=true"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "9f13ab3c-9e6b-4641-92ef-e0233b600dbe",
      "description" : "Remove Headers",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".removeHeaders(\"*\", \"x-*\", \"Authorization\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-*\", \"Authorization\")"
    }, {
      "name" : "log",
      "nodeId" : "0ce03df9-d61b-4fa2-8e06-ebccc9356202",
      "description" : "206.api.create.in",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.api.create.in",
        "message" : "${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.api.create.in&message=${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "direct",
      "nodeId" : "f547fab9-f6c5-41d3-ade8-ef99f43ff56b",
      "description" : "get-conversation",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "get-conversation",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=get-conversation"
    }, {
      "name" : "messageFilter",
      "nodeId" : "724ffeee-3a94-4eb7-80ea-8ea71308c8c9",
      "description" : "Exists?",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "route",
        "label" : "route",
        "route" : [ {
          "name" : "direct",
          "nodeId" : "0515f646-44a2-4af0-9375-4f0632e8555b",
          "description" : "get-user-uuid",
          "properties" : {
            "_type" : "direct",
            "active" : true,
            "advancedParameters" : [ ],
            "camelGroup" : "core",
            "endpointName" : "get-user-uuid",
            "name" : "direct",
            "toDynamicEndpoint" : false,
            "url" : ""
          },
          "_type" : "direct",
          "kameletPropertiesUrl" : "?endpointName=get-user-uuid"
        }, {
          "name" : "messageRouter",
          "nodeId" : "a13585d9-eeb5-4b3f-a428-5af5ea513eb6",
          "description" : "inbound / outbound",
          "properties" : {
            "_type" : "messageRouter",
            "active" : true,
            "camelGroup" : "routing",
            "name" : "messageRouter",
            "url" : ""
          },
          "_type" : "messageRouter",
          "branches" : [ {
            "type" : "route",
            "label" : "route",
            "route" : [ {
              "name" : "messagingEndpoint",
              "nodeId" : "a14eb91d-19b8-4160-828a-acf74e26c9de",
              "description" : "SQL Create Message",
              "properties" : {
                "_type" : "messagingEndpoint",
                "active" : true,
                "camelGroup" : "core",
                "name" : "messagingEndpoint",
                "toDynamicEndpoint" : false,
                "uri" : "sql:classpath:messages.insert.sql?dataSource=#dsPostgres",
                "url" : ""
              },
              "_type" : "messagingEndpoint",
              "kameletPropertiesUrl" : "?uri=sql:classpath:messages.insert.sql?dataSource=#dsPostgres"
            }, {
              "name" : "messageFilter",
              "nodeId" : "7e41ed0f-9b68-423b-95b4-74c267030ab3",
              "description" : "error",
              "properties" : {
                "_type" : "messageFilter",
                "active" : true,
                "camelGroup" : "routing",
                "name" : "messageFilter",
                "url" : ""
              },
              "_type" : "messageFilter",
              "branches" : [ {
                "type" : "filter",
                "label" : "filter",
                "route" : [ {
                  "name" : "setProperties",
                  "nodeId" : "8a280cc8-8976-47bd-88ec-9a33c2166ff8",
                  "description" : "Set Error",
                  "properties" : {
                    "_type" : "setProperties",
                    "active" : true,
                    "addNamespaces" : false,
                    "camelGroup" : "core",
                    "name" : "setProperties",
                    "namespaces" : [ ],
                    "propertyList" : [ {
                      "language" : "Constant",
                      "propertyName" : "error",
                      "propertyValue" : "An error occurred. Please try again.",
                      "uuid" : "a12d81f0-eb92-485c-b80f-b4d20504a8a5"
                    }, {
                      "language" : "Constant",
                      "propertyName" : "CamelHttpResponseCode",
                      "propertyValue" : "500",
                      "uuid" : "f88e5f66-b30d-4566-b269-2834bea1c41e"
                    } ],
                    "suppressExceptions" : false,
                    "url" : ""
                  },
                  "_type" : "setProperties",
                  "kameletPropertiesUrl" : "?error=An error occurred. Please try again.&CamelHttpResponseCode=500&addNamespaces=false&suppressExceptions=false"
                }, {
                  "name" : "dslProcessor",
                  "nodeId" : "be9d935b-4d44-4b71-a3bd-d7a4b1e37829",
                  "description" : "Render Error Response",
                  "properties" : {
                    "_type" : "dslProcessor",
                    "active" : true,
                    "camelGroup" : "core",
                    "dsl" : ".to(\"bean:renderResponse\")",
                    "name" : "dslProcessor",
                    "url" : ""
                  },
                  "_type" : "dslProcessor",
                  "kameletPropertiesUrl" : "?dsl=.to(\"bean:renderResponse\")"
                }, {
                  "name" : "stop",
                  "nodeId" : "375ab071-c8c0-4002-9cc9-c846a14306d7",
                  "description" : "",
                  "properties" : {
                    "_type" : "stop",
                    "camelGroup" : "misc",
                    "name" : "stop",
                    "url" : ""
                  },
                  "_type" : "stop",
                  "kameletPropertiesUrl" : ""
                } ],
                "properties" : {
                  "addNamespaces" : "false",
                  "condition" : "${header.CamelSqlRowCount} == 0",
                  "language" : "Simple",
                  "namespaces" : [ ],
                  "suppressExceptions" : "false"
                }
              }, {
                "type" : "route",
                "label" : "route",
                "route" : [ {
                  "name" : "setProperties",
                  "nodeId" : "b81e6ff3-7973-45bd-b152-be6bcda24b4f",
                  "description" : "Store Message ID",
                  "properties" : {
                    "_type" : "setProperties",
                    "active" : true,
                    "addNamespaces" : false,
                    "camelGroup" : "core",
                    "name" : "setProperties",
                    "namespaces" : [ ],
                    "propertyList" : [ {
                      "language" : "Simple",
                      "propertyName" : "messageId",
                      "propertyValue" : "${body[0][message_id]}",
                      "uuid" : "aa58751e-3d16-4dcb-8c19-f720624f8a75"
                    }, {
                      "language" : "Simple",
                      "propertyName" : "message",
                      "propertyValue" : "${body[0]}",
                      "uuid" : "00523767-7ed7-45a8-99dd-006ff0050cc7"
                    }, {
                      "language" : "Constant",
                      "propertyName" : "CamelHttpResponseCode",
                      "propertyValue" : "202",
                      "uuid" : "208b82f1-a517-4230-87b0-84091fc3ea93"
                    }, {
                      "language" : "Simple",
                      "propertyName" : "provider",
                      "propertyValue" : "${body[0][provider]}",
                      "uuid" : "9235c7de-ba86-4341-902d-4aa0c524b279"
                    }, {
                      "language" : "Simple",
                      "propertyName" : "messageBody",
                      "propertyValue" : "${body[0][body]}",
                      "uuid" : "12421634-cbed-4bc0-a3cd-252ae80a12f0"
                    }, {
                      "language" : "Simple",
                      "propertyName" : "messageBodyTrans",
                      "propertyValue" : "${body[0][body_transl]}",
                      "uuid" : "5cc81ec4-072b-454a-b814-d3fc60f09435"
                    }, {
                      "language" : "Simple",
                      "propertyName" : "messageLanguage",
                      "propertyValue" : "${body[0][language]}",
                      "uuid" : "791253c7-276b-433d-9b41-b0098b6aa974"
                    } ],
                    "suppressExceptions" : false,
                    "url" : ""
                  },
                  "_type" : "setProperties",
                  "kameletPropertiesUrl" : "?messageId=${body[0][message_id]}&message=${body[0]}&CamelHttpResponseCode=202&provider=${body[0][provider]}&messageBody=${body[0][body]}&messageBodyTrans=${body[0][body_transl]}&messageLanguage=${body[0][language]}&addNamespaces=false&suppressExceptions=false"
                }, {
                  "name" : "dslProcessor",
                  "nodeId" : "7ddaed22-0db8-4e69-ac92-cbdd7b08cb54",
                  "description" : "SQL Get Message",
                  "properties" : {
                    "_type" : "dslProcessor",
                    "active" : true,
                    "camelGroup" : "core",
                    "dsl" : ".to(\"velocity:messages.select.sql.vm?allowContextMapAll=true\")\n        \t.log(LoggingLevel.OFF, 'log', '${body}')\n        \t.to(\"sql:query?dataSource=#dsPostgres&OutputType=SelectOne&useMessageBodyForSql=true\")",
                    "name" : "dslProcessor",
                    "url" : ""
                  },
                  "_type" : "dslProcessor",
                  "kameletPropertiesUrl" : "?dsl=.to(\"velocity:messages.select.sql.vm?allowContextMapAll=true\")\n        \t.log(LoggingLevel.OFF, 'log', '${body}')\n        \t.to(\"sql:query?dataSource=#dsPostgres&OutputType=SelectOne&useMessageBodyForSql=true\")"
                }, {
                  "name" : "setProperties",
                  "nodeId" : "c9b7d203-a0c0-43f9-aa8c-2d70f1d65e5f",
                  "description" : "Set Provider",
                  "properties" : {
                    "_type" : "setProperties",
                    "active" : true,
                    "addNamespaces" : false,
                    "camelGroup" : "core",
                    "name" : "setProperties",
                    "namespaces" : [ ],
                    "propertyList" : [ {
                      "language" : "Simple",
                      "propertyName" : "provider",
                      "propertyValue" : "${body[provider]}",
                      "uuid" : "6ec5f562-3816-432a-8e04-7d49abb8faa8"
                    }, {
                      "language" : "Simple",
                      "propertyName" : "body",
                      "propertyValue" : "${body}",
                      "uuid" : "2eb56b20-6556-4619-8566-7b1f11663be9"
                    } ],
                    "suppressExceptions" : false,
                    "url" : ""
                  },
                  "_type" : "setProperties",
                  "kameletPropertiesUrl" : "?provider=${body[provider]}&body=${body}&addNamespaces=false&suppressExceptions=false"
                }, {
                  "name" : "messageRouter",
                  "nodeId" : "d36e55c9-129b-4d21-8e4e-92bd5fc4429e",
                  "description" : "Inbound/Outbound",
                  "properties" : {
                    "_type" : "messageRouter",
                    "active" : true,
                    "camelGroup" : "routing",
                    "name" : "messageRouter",
                    "url" : ""
                  },
                  "_type" : "messageRouter",
                  "branches" : [ {
                    "type" : "route",
                    "label" : "route",
                    "route" : [ {
                      "name" : "setBody",
                      "nodeId" : "167ed83c-5b21-433d-b35b-75d61b6ccc28",
                      "description" : "Restore Body",
                      "properties" : {
                        "_type" : "setBody",
                        "active" : true,
                        "addNamespaces" : false,
                        "camelGroup" : "core",
                        "expression" : "${exchangeProperty.body}",
                        "language" : "Simple",
                        "name" : "setBody",
                        "namespaces" : [ ],
                        "suppressExceptions" : false,
                        "url" : ""
                      },
                      "_type" : "setBody",
                      "kameletPropertiesUrl" : "?addNamespaces=false&expression=${exchangeProperty.body}&language=Simple&suppressExceptions=false"
                    }, {
                      "name" : "dslProcessor",
                      "nodeId" : "d2336008-288d-4154-82fa-32af7c0eb513",
                      "description" : "Render Response",
                      "properties" : {
                        "_type" : "dslProcessor",
                        "active" : true,
                        "camelGroup" : "core",
                        "dsl" : ".bean(\"renderResponse\")",
                        "name" : "dslProcessor",
                        "url" : ""
                      },
                      "_type" : "dslProcessor",
                      "kameletPropertiesUrl" : "?dsl=.bean(\"renderResponse\")"
                    }, {
                      "name" : "seda",
                      "nodeId" : "3984c2e1-361f-46fe-b717-74c44a2ede37",
                      "description" : "jms-publish-event",
                      "properties" : {
                        "_type" : "seda",
                        "active" : true,
                        "advancedParameters" : [ ],
                        "blockWhenFull" : false,
                        "camelGroup" : "core",
                        "concurrentConsumers" : "1",
                        "endpointName" : "jms-publish-event",
                        "limitConcurrentConsumers" : true,
                        "multipleConsumers" : false,
                        "name" : "seda",
                        "pollTimeout" : "1000",
                        "size" : "1000",
                        "specifyMaximumCapacitySize" : false,
                        "timeout" : "30000",
                        "toDynamicEndpoint" : false,
                        "url" : "",
                        "waitForTaskToComplete" : "Never"
                      },
                      "_type" : "seda",
                      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=jms-publish-event&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=Never"
                    }, {
                      "name" : "messageFilter",
                      "nodeId" : "9d81915a-0078-4916-a34a-6256b6ff6f29",
                      "description" : "source != note",
                      "properties" : {
                        "_type" : "messageFilter",
                        "active" : true,
                        "camelGroup" : "routing",
                        "name" : "messageFilter",
                        "url" : ""
                      },
                      "_type" : "messageFilter",
                      "branches" : [ {
                        "type" : "filter",
                        "label" : "filter",
                        "route" : [ {
                          "name" : "seda",
                          "nodeId" : "f4c34ada-be31-47b0-bdd7-4e6f4cab72b9",
                          "description" : "sql-update-conversation",
                          "properties" : {
                            "_type" : "seda",
                            "active" : true,
                            "advancedParameters" : [ ],
                            "blockWhenFull" : false,
                            "camelGroup" : "core",
                            "concurrentConsumers" : "1",
                            "endpointName" : "sql-update-conversation",
                            "limitConcurrentConsumers" : true,
                            "multipleConsumers" : false,
                            "name" : "seda",
                            "pollTimeout" : "1000",
                            "size" : "1000",
                            "specifyMaximumCapacitySize" : false,
                            "timeout" : "3000",
                            "toDynamicEndpoint" : false,
                            "url" : "",
                            "waitForTaskToComplete" : "Never"
                          },
                          "_type" : "seda",
                          "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=sql-update-conversation&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=3000&waitForTaskToComplete=Never"
                        } ],
                        "properties" : {
                          "addNamespaces" : "false",
                          "condition" : "${exchangeProperty.source} != \"note\"",
                          "language" : "Simple",
                          "namespaces" : [ ],
                          "suppressExceptions" : "false"
                        }
                      }, {
                        "type" : "route",
                        "label" : "route",
                        "route" : [ {
                          "name" : "seda",
                          "nodeId" : "359a5bea-4073-443e-b52c-5d682bd84955",
                          "description" : "send-autoreply",
                          "properties" : {
                            "_type" : "seda",
                            "active" : true,
                            "advancedParameters" : [ ],
                            "blockWhenFull" : false,
                            "camelGroup" : "core",
                            "concurrentConsumers" : "1",
                            "endpointName" : "send-autoreply",
                            "limitConcurrentConsumers" : true,
                            "multipleConsumers" : false,
                            "name" : "seda",
                            "pollTimeout" : "1000",
                            "size" : "1000",
                            "specifyMaximumCapacitySize" : false,
                            "timeout" : "30000",
                            "toDynamicEndpoint" : false,
                            "url" : "",
                            "waitForTaskToComplete" : "Never"
                          },
                          "_type" : "seda",
                          "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=send-autoreply&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=Never"
                        } ],
                        "properties" : { }
                      } ],
                      "kameletPropertiesUrl" : ""
                    } ],
                    "properties" : { }
                  }, {
                    "type" : "when",
                    "label" : "outbound && sms",
                    "route" : [ {
                      "name" : "exchangePattern",
                      "nodeId" : "e4b9fb96-2de6-41d0-96e7-982f7ed20acb",
                      "description" : "InOnly",
                      "properties" : {
                        "_type" : "exchangePattern",
                        "active" : true,
                        "camelGroup" : "core",
                        "exchangePattern" : "InOnly",
                        "name" : "exchangePattern",
                        "url" : ""
                      },
                      "_type" : "exchangePattern",
                      "kameletPropertiesUrl" : "?exchangePattern=InOnly"
                    }, {
                      "name" : "direct",
                      "nodeId" : "74c48a18-5ed3-4ada-8cab-58e3d044cb56",
                      "description" : "enqueue-outbound-msg",
                      "properties" : {
                        "_type" : "direct",
                        "active" : true,
                        "advancedParameters" : [ ],
                        "camelGroup" : "core",
                        "endpointName" : "enqueue-outbound-msg",
                        "name" : "direct",
                        "toDynamicEndpoint" : false,
                        "url" : ""
                      },
                      "_type" : "direct",
                      "kameletPropertiesUrl" : "?endpointName=enqueue-outbound-msg"
                    } ],
                    "properties" : {
                      "addNamespaces" : "false",
                      "condition" : "${exchangeProperty.direction} == 'outbound'",
                      "language" : "Simple",
                      "namespaces" : [ ],
                      "suppressExceptions" : "false"
                    }
                  } ],
                  "kameletPropertiesUrl" : ""
                } ],
                "properties" : { }
              } ],
              "kameletPropertiesUrl" : ""
            } ],
            "properties" : { }
          }, {
            "type" : "when",
            "label" : "inbound",
            "route" : [ {
              "name" : "messageFilter",
              "nodeId" : "4d3ff63b-56de-410c-aadd-3273e0607f51",
              "description" : "detect?",
              "properties" : {
                "_type" : "messageFilter",
                "active" : true,
                "camelGroup" : "routing",
                "name" : "messageFilter",
                "url" : ""
              },
              "_type" : "messageFilter",
              "branches" : [ {
                "type" : "filter",
                "label" : "!recipientLang",
                "route" : [ {
                  "name" : "direct",
                  "nodeId" : "9b412945-968d-4f85-a4fe-fe6d3c448a44",
                  "description" : "detect-language",
                  "properties" : {
                    "_type" : "direct",
                    "active" : true,
                    "advancedParameters" : [ ],
                    "camelGroup" : "core",
                    "endpointName" : "detect-language",
                    "name" : "direct",
                    "toDynamicEndpoint" : false,
                    "url" : ""
                  },
                  "_type" : "direct",
                  "kameletPropertiesUrl" : "?endpointName=detect-language"
                }, {
                  "name" : "messageFilter",
                  "nodeId" : "01490f09-5fc8-42f3-8c18-776817f3a176",
                  "description" : "update recip?",
                  "properties" : {
                    "_type" : "messageFilter",
                    "active" : true,
                    "camelGroup" : "routing",
                    "name" : "messageFilter",
                    "url" : ""
                  },
                  "_type" : "messageFilter",
                  "branches" : [ {
                    "type" : "filter",
                    "label" : "recipLang!=detectedLang",
                    "route" : [ {
                      "name" : "setProperties",
                      "nodeId" : "d85111fb-e26e-4855-acb5-6abcab8820a7",
                      "description" : "Update Language",
                      "properties" : {
                        "_type" : "setProperties",
                        "active" : true,
                        "addNamespaces" : false,
                        "camelGroup" : "core",
                        "name" : "setProperties",
                        "namespaces" : [ ],
                        "propertyList" : [ {
                          "language" : "Simple",
                          "propertyName" : "recipientLanguage",
                          "propertyValue" : "${exchangeProperty.detectedDialect}",
                          "uuid" : "8226902d-2b73-48f2-b6cc-878e70bd67e8"
                        }, {
                          "language" : "Simple",
                          "propertyName" : "language",
                          "propertyValue" : "${exchangeProperty.recipientLanguage}",
                          "uuid" : "b06a1f5c-cf1a-429f-88d1-2a947159ccd5"
                        } ],
                        "suppressExceptions" : false,
                        "url" : ""
                      },
                      "_type" : "setProperties",
                      "kameletPropertiesUrl" : "?recipientLanguage=${exchangeProperty.detectedDialect}&language=${exchangeProperty.recipientLanguage}&addNamespaces=false&suppressExceptions=false"
                    }, {
                      "name" : "seda",
                      "nodeId" : "70a8bc87-4c93-4ada-b7ac-c41745ea9936",
                      "description" : "update-recipient",
                      "properties" : {
                        "_type" : "seda",
                        "active" : true,
                        "advancedParameters" : [ ],
                        "blockWhenFull" : false,
                        "camelGroup" : "core",
                        "concurrentConsumers" : "1",
                        "endpointName" : "update-recipient",
                        "limitConcurrentConsumers" : true,
                        "multipleConsumers" : false,
                        "name" : "seda",
                        "pollTimeout" : "1000",
                        "size" : "1000",
                        "specifyMaximumCapacitySize" : false,
                        "timeout" : "30000",
                        "toDynamicEndpoint" : false,
                        "url" : "",
                        "waitForTaskToComplete" : "Never"
                      },
                      "_type" : "seda",
                      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=update-recipient&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=Never"
                    } ],
                    "properties" : {
                      "addNamespaces" : "false",
                      "condition" : "${exchangeProperty.recipientLanguage} != ${exchangeProperty.detectedDialect} && ${exchangeProperty.source} != 'transcribe'",
                      "language" : "Simple",
                      "namespaces" : [ ],
                      "suppressExceptions" : "false"
                    }
                  } ],
                  "kameletPropertiesUrl" : ""
                } ],
                "properties" : {
                  "addNamespaces" : "false",
                  "condition" : "${exchangeProperty.recipientLanguage} == null || ${exchangeProperty.body.length} > 5",
                  "language" : "Simple",
                  "namespaces" : [ ],
                  "suppressExceptions" : "false"
                }
              }, {
                "type" : "route",
                "label" : "route",
                "route" : [ {
                  "name" : "log",
                  "nodeId" : "80bf3645-0848-428b-ad93-5e420b13def2",
                  "description" : "",
                  "properties" : {
                    "_type" : "log",
                    "active" : true,
                    "advancedParameters" : [ ],
                    "camelGroup" : "component",
                    "level" : "OFF",
                    "logType" : "EIP",
                    "loggerName" : "log",
                    "message" : "headers: ${headers}; body: ${body}",
                    "multiline" : false,
                    "name" : "log",
                    "showAll" : false,
                    "showBody" : true,
                    "showBodyType" : true,
                    "showCaughtException" : false,
                    "showExchangeId" : false,
                    "showHeaders" : false,
                    "showProperties" : false,
                    "showStackTrace" : false,
                    "toDynamicEndpoint" : false,
                    "url" : ""
                  },
                  "_type" : "log",
                  "kameletPropertiesUrl" : "?level=OFF&logType=EIP&loggerName=log&message=headers: ${headers}; body: ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                }, {
                  "name" : "messageFilter",
                  "nodeId" : "f197991c-2f06-49c6-95f4-5ea7bb42d7c9",
                  "description" : "translate?",
                  "properties" : {
                    "_type" : "messageFilter",
                    "active" : true,
                    "camelGroup" : "routing",
                    "name" : "messageFilter",
                    "url" : ""
                  },
                  "_type" : "messageFilter",
                  "branches" : [ {
                    "type" : "filter",
                    "label" : "recipLang!=operatorLang",
                    "route" : [ {
                      "name" : "direct",
                      "nodeId" : "fb51a01c-8195-4aa8-ac50-457804062ccf",
                      "description" : "translate-message",
                      "properties" : {
                        "_type" : "direct",
                        "active" : true,
                        "advancedParameters" : [ ],
                        "camelGroup" : "core",
                        "endpointName" : "translate-message",
                        "name" : "direct",
                        "toDynamicEndpoint" : false,
                        "url" : ""
                      },
                      "_type" : "direct",
                      "kameletPropertiesUrl" : "?endpointName=translate-message"
                    }, {
                      "name" : "process",
                      "nodeId" : "31787522-76ac-4757-8328-4e9cd90fc405",
                      "description" : "Check Translation",
                      "properties" : {
                        "_type" : "process",
                        "active" : true,
                        "camelGroup" : "transform",
                        "code" : "String bodyTransl = (String)exchange.getProperty(\"bodyTransl\");\nString body = (String)exchange.getProperty(\"body\");\nString source = (String)exchange.getProperty(\"source\");\n\nif ((bodyTransl == null || bodyTransl.equals(\"\") || bodyTransl.equals(body)) && !source.equals(\"transcribe\"))\n\texchange.setProperty(\"needTranslate\", true);\n",
                        "import" : "// import org.apache.camel.Message",
                        "name" : "process",
                        "url" : ""
                      },
                      "_type" : "process",
                      "kameletPropertiesUrl" : "?code=String bodyTransl = (String)exchange.getProperty(\"bodyTransl\");\nString body = (String)exchange.getProperty(\"body\");\nString source = (String)exchange.getProperty(\"source\");\n\nif ((bodyTransl == null || bodyTransl.equals(\"\") || bodyTransl.equals(body)) && !source.equals(\"transcribe\"))\n\texchange.setProperty(\"needTranslate\", true);\n&import=// import org.apache.camel.Message"
                    }, {
                      "name" : "messageFilter",
                      "nodeId" : "97195de5-65b7-495d-a753-aa9ead3793be",
                      "description" : "Addtl Transl Needed?",
                      "properties" : {
                        "_type" : "messageFilter",
                        "active" : true,
                        "camelGroup" : "routing",
                        "name" : "messageFilter",
                        "url" : ""
                      },
                      "_type" : "messageFilter",
                      "branches" : [ {
                        "type" : "filter",
                        "label" : "filter",
                        "route" : [ {
                          "name" : "log",
                          "nodeId" : "807e43fb-a13e-4ba4-9038-15747c872cee",
                          "description" : "206.api.create.redetect",
                          "properties" : {
                            "_type" : "log",
                            "active" : true,
                            "advancedParameters" : [ ],
                            "camelGroup" : "component",
                            "level" : "WARN",
                            "logType" : "EIP",
                            "loggerName" : "206.api.create.redetect.in",
                            "message" : "Invalid translation, detecting language",
                            "multiline" : false,
                            "name" : "log",
                            "showAll" : false,
                            "showBody" : true,
                            "showBodyType" : true,
                            "showCaughtException" : false,
                            "showExchangeId" : false,
                            "showHeaders" : false,
                            "showProperties" : false,
                            "showStackTrace" : false,
                            "toDynamicEndpoint" : false,
                            "url" : ""
                          },
                          "_type" : "log",
                          "kameletPropertiesUrl" : "?level=WARN&logType=EIP&loggerName=206.api.create.redetect.in&message=Invalid translation, detecting language&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                        }, {
                          "name" : "direct",
                          "nodeId" : "1a525882-df3b-4e67-a9ef-40e87fed95c9",
                          "description" : "detect-language",
                          "properties" : {
                            "_type" : "direct",
                            "active" : true,
                            "advancedParameters" : [ ],
                            "camelGroup" : "core",
                            "endpointName" : "detect-language",
                            "name" : "direct",
                            "toDynamicEndpoint" : false,
                            "url" : ""
                          },
                          "_type" : "direct",
                          "kameletPropertiesUrl" : "?endpointName=detect-language"
                        }, {
                          "name" : "log",
                          "nodeId" : "3296f9ea-6c60-4603-b5ab-c94c1d1aac4a",
                          "description" : "206.api.create.redetect",
                          "properties" : {
                            "_type" : "log",
                            "active" : true,
                            "advancedParameters" : [ ],
                            "camelGroup" : "component",
                            "level" : "INFO",
                            "logType" : "EIP",
                            "loggerName" : "206.api.create.redetect.out",
                            "message" : "(${header.CamelHttpResponseCode}) ${body}",
                            "multiline" : false,
                            "name" : "log",
                            "showAll" : false,
                            "showBody" : true,
                            "showBodyType" : true,
                            "showCaughtException" : false,
                            "showExchangeId" : false,
                            "showHeaders" : false,
                            "showProperties" : false,
                            "showStackTrace" : false,
                            "toDynamicEndpoint" : false,
                            "url" : ""
                          },
                          "_type" : "log",
                          "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.api.create.redetect.out&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                        }, {
                          "name" : "messageFilter",
                          "nodeId" : "c6cef67c-09b8-45ea-a695-91545dd158c3",
                          "description" : "update recip?",
                          "properties" : {
                            "_type" : "messageFilter",
                            "active" : true,
                            "camelGroup" : "routing",
                            "name" : "messageFilter",
                            "url" : ""
                          },
                          "_type" : "messageFilter",
                          "branches" : [ {
                            "type" : "filter",
                            "label" : "recipLang!=detectedLang",
                            "route" : [ {
                              "name" : "setProperties",
                              "nodeId" : "37cd9ad8-df89-476a-a4bc-cb8a9a8dcf9f",
                              "description" : "Update Language",
                              "properties" : {
                                "_type" : "setProperties",
                                "active" : true,
                                "addNamespaces" : false,
                                "camelGroup" : "core",
                                "name" : "setProperties",
                                "namespaces" : [ ],
                                "propertyList" : [ {
                                  "language" : "Simple",
                                  "propertyName" : "recipientLanguage",
                                  "propertyValue" : "${exchangeProperty.detectedDialect}",
                                  "uuid" : "59512665-bca5-48b5-8558-d62c3a133303"
                                }, {
                                  "language" : "Simple",
                                  "propertyName" : "language",
                                  "propertyValue" : "${exchangeProperty.detectedDialect}",
                                  "uuid" : "f5a173ee-a558-4512-86ed-c7b420b23e19"
                                } ],
                                "suppressExceptions" : false,
                                "url" : ""
                              },
                              "_type" : "setProperties",
                              "kameletPropertiesUrl" : "?recipientLanguage=${exchangeProperty.detectedDialect}&language=${exchangeProperty.detectedDialect}&addNamespaces=false&suppressExceptions=false"
                            }, {
                              "name" : "seda",
                              "nodeId" : "e3958902-11dd-4737-adae-fc17df3be261",
                              "description" : "update-recipient",
                              "properties" : {
                                "_type" : "seda",
                                "active" : true,
                                "advancedParameters" : [ ],
                                "blockWhenFull" : false,
                                "camelGroup" : "core",
                                "concurrentConsumers" : "1",
                                "endpointName" : "update-recipient",
                                "limitConcurrentConsumers" : true,
                                "multipleConsumers" : false,
                                "name" : "seda",
                                "pollTimeout" : "1000",
                                "size" : "1000",
                                "specifyMaximumCapacitySize" : false,
                                "timeout" : "30000",
                                "toDynamicEndpoint" : false,
                                "url" : "",
                                "waitForTaskToComplete" : "Never"
                              },
                              "_type" : "seda",
                              "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=update-recipient&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=Never"
                            } ],
                            "properties" : {
                              "addNamespaces" : "false",
                              "condition" : "${exchangeProperty.recipientLanguage} != ${exchangeProperty.detectedDialect}",
                              "language" : "Simple",
                              "namespaces" : [ ],
                              "suppressExceptions" : "false"
                            }
                          }, {
                            "type" : "route",
                            "label" : "route",
                            "route" : [ {
                              "name" : "log",
                              "nodeId" : "43e1c223-6c07-4971-9f0a-d77b26a37449",
                              "description" : "",
                              "properties" : {
                                "_type" : "log",
                                "active" : true,
                                "advancedParameters" : [ ],
                                "camelGroup" : "component",
                                "level" : "OFF",
                                "logType" : "EIP",
                                "loggerName" : "log",
                                "message" : "Next...",
                                "multiline" : false,
                                "name" : "log",
                                "showAll" : false,
                                "showBody" : true,
                                "showBodyType" : true,
                                "showCaughtException" : false,
                                "showExchangeId" : false,
                                "showHeaders" : false,
                                "showProperties" : false,
                                "showStackTrace" : false,
                                "toDynamicEndpoint" : false,
                                "url" : ""
                              },
                              "_type" : "log",
                              "kameletPropertiesUrl" : "?level=OFF&logType=EIP&loggerName=log&message=Next...&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                            }, {
                              "name" : "messageFilter",
                              "nodeId" : "9415d867-bb58-4a7a-b90d-ca2890490178",
                              "description" : "translate?",
                              "properties" : {
                                "_type" : "messageFilter",
                                "active" : true,
                                "camelGroup" : "routing",
                                "name" : "messageFilter",
                                "url" : ""
                              },
                              "_type" : "messageFilter",
                              "branches" : [ {
                                "type" : "filter",
                                "label" : "recipLang!=operatorLang",
                                "route" : [ {
                                  "name" : "log",
                                  "nodeId" : "c45254be-bca4-4f2f-b2d1-05e9a92c88ba",
                                  "description" : "206.api.create.retrnslt",
                                  "properties" : {
                                    "_type" : "log",
                                    "active" : true,
                                    "advancedParameters" : [ ],
                                    "camelGroup" : "component",
                                    "level" : "INFO",
                                    "logType" : "EIP",
                                    "loggerName" : "206.api.create.retrnslt",
                                    "message" : "Recip Lang '${exchangeProperty.recipientLanguage}' not equal to agentLang '${exchangeProperty.operatorLanguage}'",
                                    "multiline" : false,
                                    "name" : "log",
                                    "showAll" : false,
                                    "showBody" : true,
                                    "showBodyType" : true,
                                    "showCaughtException" : false,
                                    "showExchangeId" : false,
                                    "showHeaders" : false,
                                    "showProperties" : false,
                                    "showStackTrace" : false,
                                    "toDynamicEndpoint" : false,
                                    "url" : ""
                                  },
                                  "_type" : "log",
                                  "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.api.create.retrnslt&message=Recip Lang '${exchangeProperty.recipientLanguage}' not equal to agentLang '${exchangeProperty.operatorLanguage}'&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                                }, {
                                  "name" : "direct",
                                  "nodeId" : "dabda0d8-98b5-4f78-9c45-dc3b35f8b039",
                                  "description" : "translate-message",
                                  "properties" : {
                                    "_type" : "direct",
                                    "active" : true,
                                    "advancedParameters" : [ ],
                                    "camelGroup" : "core",
                                    "endpointName" : "translate-message",
                                    "name" : "direct",
                                    "toDynamicEndpoint" : false,
                                    "url" : ""
                                  },
                                  "_type" : "direct",
                                  "kameletPropertiesUrl" : "?endpointName=translate-message"
                                }, {
                                  "name" : "log",
                                  "nodeId" : "93d2a075-9c76-4b47-8b83-f3b91319240c",
                                  "description" : "",
                                  "properties" : {
                                    "_type" : "log",
                                    "active" : true,
                                    "advancedParameters" : [ ],
                                    "camelGroup" : "component",
                                    "level" : "INFO",
                                    "logType" : "EIP",
                                    "loggerName" : "log",
                                    "message" : "Done retranslating ${body}",
                                    "multiline" : false,
                                    "name" : "log",
                                    "showAll" : false,
                                    "showBody" : true,
                                    "showBodyType" : true,
                                    "showCaughtException" : false,
                                    "showExchangeId" : false,
                                    "showHeaders" : false,
                                    "showProperties" : false,
                                    "showStackTrace" : false,
                                    "toDynamicEndpoint" : false,
                                    "url" : ""
                                  },
                                  "_type" : "log",
                                  "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=log&message=Done retranslating ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                                } ],
                                "properties" : {
                                  "addNamespaces" : "false",
                                  "condition" : "${exchangeProperty.recipientLanguage} != ${exchangeProperty.operatorLanguage}",
                                  "language" : "Simple",
                                  "namespaces" : [ ],
                                  "suppressExceptions" : "false"
                                }
                              } ],
                              "kameletPropertiesUrl" : ""
                            } ],
                            "properties" : { }
                          } ],
                          "kameletPropertiesUrl" : ""
                        } ],
                        "properties" : {
                          "addNamespaces" : "false",
                          "condition" : "${exchangeProperty.needTranslate} == true",
                          "language" : "Simple",
                          "namespaces" : [ ],
                          "suppressExceptions" : "false"
                        }
                      } ],
                      "kameletPropertiesUrl" : ""
                    } ],
                    "properties" : {
                      "addNamespaces" : "false",
                      "condition" : "${exchangeProperty.recipientLanguage} != ${exchangeProperty.operatorLanguage} || ${exchangeProperty.language} != null",
                      "language" : "Simple",
                      "namespaces" : [ ],
                      "suppressExceptions" : "false"
                    }
                  } ],
                  "kameletPropertiesUrl" : ""
                } ],
                "properties" : { }
              } ],
              "kameletPropertiesUrl" : ""
            } ],
            "properties" : {
              "addNamespaces" : "false",
              "condition" : "${exchangeProperty.direction} == \"inbound\" && ${exchangeProperty.source} != \"note\"",
              "language" : "Simple",
              "namespaces" : [ ],
              "suppressExceptions" : "false"
            }
          }, {
            "type" : "when",
            "label" : "outbound",
            "route" : [ {
              "name" : "messageFilter",
              "nodeId" : "118dfa0c-38d9-4feb-9562-d0612bb91315",
              "description" : "translate?",
              "properties" : {
                "_type" : "messageFilter",
                "active" : true,
                "camelGroup" : "routing",
                "name" : "messageFilter",
                "url" : ""
              },
              "_type" : "messageFilter",
              "branches" : [ {
                "type" : "filter",
                "label" : "language || recipLang",
                "route" : [ {
                  "name" : "direct",
                  "nodeId" : "ab34f37f-9fbc-4235-b950-0d7e43c9cda1",
                  "description" : "translate-message",
                  "properties" : {
                    "_type" : "direct",
                    "active" : true,
                    "advancedParameters" : [ ],
                    "camelGroup" : "core",
                    "endpointName" : "translate-message",
                    "name" : "direct",
                    "toDynamicEndpoint" : false,
                    "url" : ""
                  },
                  "_type" : "direct",
                  "kameletPropertiesUrl" : "?endpointName=translate-message"
                }, {
                  "name" : "setProperties",
                  "nodeId" : "26f6ec02-27ff-4d72-a552-62ebd1a826e3",
                  "description" : "Set Message Language",
                  "properties" : {
                    "_type" : "setProperties",
                    "active" : true,
                    "addNamespaces" : false,
                    "camelGroup" : "core",
                    "name" : "setProperties",
                    "namespaces" : [ ],
                    "propertyList" : [ {
                      "language" : "Simple",
                      "propertyName" : "language",
                      "propertyValue" : "${exchangeProperty.recipientLanguage}",
                      "uuid" : "70da5be7-a658-4f9c-90a8-34e1b43ef6b5"
                    } ],
                    "suppressExceptions" : false,
                    "url" : ""
                  },
                  "_type" : "setProperties",
                  "kameletPropertiesUrl" : "?language=${exchangeProperty.recipientLanguage}&addNamespaces=false&suppressExceptions=false"
                }, {
                  "name" : "log",
                  "nodeId" : "42b6b461-e1c0-44b0-967d-37883f21fb5d",
                  "description" : "",
                  "properties" : {
                    "_type" : "log",
                    "active" : true,
                    "advancedParameters" : [ ],
                    "camelGroup" : "component",
                    "level" : "INFO",
                    "logType" : "EIP",
                    "loggerName" : "log",
                    "message" : "**${body}",
                    "multiline" : false,
                    "name" : "log",
                    "showAll" : false,
                    "showBody" : true,
                    "showBodyType" : true,
                    "showCaughtException" : false,
                    "showExchangeId" : false,
                    "showHeaders" : false,
                    "showProperties" : false,
                    "showStackTrace" : false,
                    "toDynamicEndpoint" : false,
                    "url" : ""
                  },
                  "_type" : "log",
                  "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=log&message=**${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                } ],
                "properties" : {
                  "addNamespaces" : "false",
                  "condition" : "${exchangeProperty.source} != 'note' && ${exchangeProperty.language} != null || ${exchangeProperty.recipientLanguage} != null",
                  "language" : "Simple",
                  "namespaces" : [ ],
                  "suppressExceptions" : "false"
                }
              } ],
              "kameletPropertiesUrl" : ""
            } ],
            "properties" : {
              "addNamespaces" : "false",
              "condition" : "${exchangeProperty.direction} == \"outbound\" && ${exchangeProperty.source} != \"note\"",
              "language" : "Simple",
              "namespaces" : [ ],
              "suppressExceptions" : "false"
            }
          } ],
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : { }
      }, {
        "type" : "filter",
        "label" : "404",
        "route" : [ {
          "name" : "clearBody",
          "nodeId" : "9e05d619-6f46-404b-aca3-cc6a5ff194c6",
          "description" : "",
          "properties" : {
            "_type" : "clearBody",
            "camelGroup" : "core",
            "name" : "clearBody",
            "url" : ""
          },
          "_type" : "clearBody",
          "kameletPropertiesUrl" : ""
        }, {
          "name" : "setHeaders",
          "nodeId" : "ec7632ee-2fef-4261-848c-7ebf9760cc4a",
          "description" : "HTTP404",
          "properties" : {
            "_type" : "setHeaders",
            "active" : true,
            "addNamespaces" : false,
            "camelGroup" : "core",
            "headerList" : [ {
              "headerName" : "CamelHttpResponseCode",
              "headerValue" : "404",
              "language" : "Constant",
              "uuid" : "d8007466-b34e-41d5-94f1-1db4ea675011"
            } ],
            "name" : "setHeaders",
            "namespaces" : [ ],
            "suppressExceptions" : false,
            "url" : ""
          },
          "_type" : "setHeaders",
          "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
        }, {
          "name" : "stop",
          "nodeId" : "67da2c4d-c776-4315-b0eb-e235e2929700",
          "description" : "",
          "properties" : {
            "_type" : "stop",
            "camelGroup" : "misc",
            "name" : "stop",
            "url" : ""
          },
          "_type" : "stop",
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${header.CamelHttpResponseCode} == 404",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-8",
    "enabled" : true,
    "routeId" : 4,
    "route" : [ {
      "name" : "direct",
      "nodeId" : "1f8e9c59-25cf-4b2f-aa38-5a1c7b26a622",
      "description" : "get-create-recipient",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "get-create-recipient",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=get-create-recipient"
    }, {
      "name" : "process",
      "nodeId" : "33f9089d-6b18-4b20-b8d5-63f08a232be8",
      "description" : "Set Recipient Request",
      "properties" : {
        "_type" : "process",
        "active" : true,
        "camelGroup" : "transform",
        "code" : "ObjectMapper mapper = new ObjectMapper();\n\nString recipientNumber = (String)exchange.getProperty(\"recipientNumber\");\n\nHashMap<String, String> recipientReq = new HashMap<String, String>() {{\n\tput(\"agency_id\", (String)exchange.getProperty(\"agencyId\"));\n\tput(\"number\", recipientNumber);\n}};\n\nif (exchange.getProperty(\"label\") != null)\n\trecipientReq.put(\"label\", (String)exchange.getProperty(\"label\"));\n\nif (exchange.getProperty(\"language\") != null)\n\trecipientReq.put(\"language\", (String)exchange.getProperty(\"language\"));\n\nexchange.getIn().setBody(mapper.writeValueAsString(recipientReq));",
        "import" : "import com.fasterxml.jackson.databind.ObjectMapper;",
        "name" : "process",
        "url" : ""
      },
      "_type" : "process",
      "kameletPropertiesUrl" : "?code=ObjectMapper mapper = new ObjectMapper();\n\nString recipientNumber = (String)exchange.getProperty(\"recipientNumber\");\n\nHashMap<String, String> recipientReq = new HashMap<String, String>() {{\n\tput(\"agency_id\", (String)exchange.getProperty(\"agencyId\"));\n\tput(\"number\", recipientNumber);\n}};\n\nif (exchange.getProperty(\"label\") != null)\n\trecipientReq.put(\"label\", (String)exchange.getProperty(\"label\"));\n\nif (exchange.getProperty(\"language\") != null)\n\trecipientReq.put(\"language\", (String)exchange.getProperty(\"language\"));\n\nexchange.getIn().setBody(mapper.writeValueAsString(recipientReq));&import=import com.fasterxml.jackson.databind.ObjectMapper;"
    }, {
      "name" : "setHeaders",
      "nodeId" : "42f880a9-b2ee-45bc-827e-658c35e5b6b1",
      "description" : "Set Request Headers",
      "properties" : {
        "_type" : "setHeaders",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "headerList" : [ {
          "headerName" : "CamelHttpPath",
          "headerValue" : "/api/v1/recipients",
          "language" : "Constant",
          "uuid" : "63a87e57-6ef8-4a0b-8060-e90114a766e4"
        }, {
          "headerName" : "x-agency-id",
          "headerValue" : "${exchangeProperty.agencyId}",
          "language" : "Simple",
          "uuid" : "da1395fb-8ad2-4313-a2ab-808de0e499e3"
        }, {
          "headerName" : "Content-Type",
          "headerValue" : "application/json",
          "language" : "Constant",
          "uuid" : "2a977dc3-5bb3-4d2e-9aeb-a288d3ec95ed"
        } ],
        "name" : "setHeaders",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setHeaders",
      "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "log",
      "nodeId" : "f4be97b5-e81c-4ab4-a4f0-442b2b3a95c2",
      "description" : "206.direct.recip.new.in",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.direct.recip.new.in",
        "message" : "POST ${header.CamelHttpPath} ${body} ",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.direct.recip.new.in&message=POST ${header.CamelHttpPath} ${body} &multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "http",
      "nodeId" : "88aad23d-85bf-4e97-ad7f-fa7a47b7f3d8",
      "description" : "POST /recipients",
      "properties" : {
        "_type" : "http",
        "active" : true,
        "advancedParameters" : [ ],
        "bridgeEndpoint" : false,
        "camelGroup" : "component",
        "connectTimeout" : "-1",
        "connectionRequestTimeout" : "-1",
        "disableStreamCache" : true,
        "httpMethod" : "POST",
        "httpUri" : "{{convey.api.host}}",
        "name" : "http",
        "scheme" : "https",
        "socketTimeout" : "-1",
        "throwExceptionOnFailure" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "http",
      "kameletPropertiesUrl" : "?bridgeEndpoint=false&connectTimeout=-1&connectionRequestTimeout=-1&disableStreamCache=true&httpMethod=POST&httpUri={{convey.api.host}}&socketTimeout=-1&throwExceptionOnFailure=false"
    }, {
      "name" : "convertBodyTo",
      "nodeId" : "7321448d-f0a4-4aff-9357-3099d8e71590",
      "description" : "To String",
      "properties" : {
        "_type" : "convertBodyTo",
        "active" : true,
        "camelGroup" : "transform",
        "name" : "convertBodyTo",
        "targetClass" : "String.class",
        "url" : ""
      },
      "_type" : "convertBodyTo",
      "kameletPropertiesUrl" : "?targetClass=String.class"
    }, {
      "name" : "log",
      "nodeId" : "f0970842-2e0c-49fa-a2ce-1348eed4897c",
      "description" : "206.direct.recip.new.out",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.direct.recip.new.out",
        "message" : "(${header.CamelHttpResponseCode}) ${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.direct.recip.new.out&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "setProperties",
      "nodeId" : "a53479f8-8020-4412-a026-adec130ad3ca",
      "description" : "Set Recipient Props",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "JsonPath",
          "propertyName" : "recipientId",
          "propertyValue" : "$.data.recipient_id",
          "uuid" : "e55b41e3-57f2-46ac-aa81-1596ec2eed3a"
        }, {
          "language" : "JsonPath",
          "propertyName" : "recipientLanguage",
          "propertyValue" : "$.data.language",
          "uuid" : "9021a608-4bee-4877-9eeb-e51b7d31b96d"
        } ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?recipientId=$.data.recipient_id&recipientLanguage=$.data.language&addNamespaces=false&suppressExceptions=false"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-9",
    "enabled" : true,
    "routeId" : 5,
    "route" : [ {
      "name" : "direct",
      "nodeId" : "c81091b6-ad5e-409f-8fb4-db7f0c7bae10",
      "description" : "translate-message",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "translate-message",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=translate-message"
    }, {
      "name" : "process",
      "nodeId" : "32ecc94b-ae79-4eb5-829c-068d216e3bb9",
      "description" : "Set Translation Request",
      "properties" : {
        "_type" : "process",
        "active" : true,
        "camelGroup" : "transform",
        "code" : "ObjectMapper mapper = new ObjectMapper();\n\nString language = null;\n\nString body = (String)exchange.getProperty(\"body\");\nString direction = (String)exchange.getProperty(\"direction\");\nString operatorDialect = (String)exchange.getProperty(\"operatorDialect\");\nString recipientDialect = (String)exchange.getProperty(\"recipientLanguage\");\nString requestedDialect = (String)exchange.getProperty(\"language\");\n\n/*\ntry {\n\tString urlPattern = \"(https:((//)|(\\\\\\\\))+[\\\\w\\\\d:#@%/;$\\\\(\\\\)~_?\\\\+-=\\\\\\\\\\\\.&]*)\\n\\n\";\n\tPattern p = Pattern.compile(urlPattern, Pattern.CASE_INSENSITIVE);\n\tMatcher m = p.matcher(body);\n\tint i = 0;\n\twhile (m.find()) {\n\t\tbody = body.replace(m.group(i),\"\").trim();\n\t\ti++;\n\t}\n} catch (Exception e) {}\n*/\n\nif (operatorDialect == null)\n\toperatorDialect = \"en\";\n\nif (requestedDialect != null && requestedDialect.equals(operatorDialect) == false)\n\tlanguage = requestedDialect;\nelse if (requestedDialect == null && recipientDialect != null && requestedDialect.equals(operatorDialect) == false)\n\tlanguage = recipientDialect;\nelse if (direction.equals(\"inbound\") && recipientDialect == null)\n\tlanguage = \"auto\";\n\nexchange.setProperty(\"doTranslate\", false);\n\nif (body != null && body != \"\" && language != null) {\n\tString outputDialect = null;\n\tString inputDialect = null;\n\n\tif (direction.equals(\"outbound\")) {\n\t\tinputDialect = operatorDialect;\n\t\toutputDialect = language;\n\t} else if (direction.equals(\"inbound\")) {\n\t\tinputDialect = language;\n\t\toutputDialect = operatorDialect;\n\t}\n\t\n\ttry {\n\t\tSystem.out.println(\"inputDialect: \" + inputDialect);\n\t\tSystem.out.println(\"outputDialect: \" + outputDialect);\t\t\n\t\tif (!(inputDialect.equals(outputDialect))) {\n\t\t\tHashMap<String, String> translateReq = new HashMap<String, String>() {{\n\t\t\t\tput(\"input_text\", (String)exchange.getProperty(\"body\"));\n\t\t\t\tput(\"output_dialect\", outputDialect);\n\t\t\t}};\t\n\t\t\t\n\t\t\tif (!inputDialect.equals(\"auto\"))\n\t\t\t\ttranslateReq.put(\"input_dialect\", inputDialect);\n\t\t\t\n\t\t\texchange.setProperty(\"doTranslate\", true);\n\t\t\texchange.getIn().setBody(mapper.writeValueAsString(translateReq));\n\t\t}\n\t} catch (Exception e) {\n\t\tSystem.out.println(\"Warn: \" + e);\n\t}\n}",
        "import" : "import com.fasterxml.jackson.databind.ObjectMapper;\nimport java.util.regex.Pattern;\nimport java.util.regex.Matcher;",
        "name" : "process",
        "url" : ""
      },
      "_type" : "process",
      "kameletPropertiesUrl" : "?code=ObjectMapper mapper = new ObjectMapper();\n\nString language = null;\n\nString body = (String)exchange.getProperty(\"body\");\nString direction = (String)exchange.getProperty(\"direction\");\nString operatorDialect = (String)exchange.getProperty(\"operatorDialect\");\nString recipientDialect = (String)exchange.getProperty(\"recipientLanguage\");\nString requestedDialect = (String)exchange.getProperty(\"language\");\n\n/*\ntry {\n\tString urlPattern = \"(https:((//)|(\\\\\\\\))+[\\\\w\\\\d:#@%/;$\\\\(\\\\)~_?\\\\+-=\\\\\\\\\\\\.&]*)\\n\\n\";\n\tPattern p = Pattern.compile(urlPattern, Pattern.CASE_INSENSITIVE);\n\tMatcher m = p.matcher(body);\n\tint i = 0;\n\twhile (m.find()) {\n\t\tbody = body.replace(m.group(i),\"\").trim();\n\t\ti++;\n\t}\n} catch (Exception e) {}\n*/\n\nif (operatorDialect == null)\n\toperatorDialect = \"en\";\n\nif (requestedDialect != null && requestedDialect.equals(operatorDialect) == false)\n\tlanguage = requestedDialect;\nelse if (requestedDialect == null && recipientDialect != null && requestedDialect.equals(operatorDialect) == false)\n\tlanguage = recipientDialect;\nelse if (direction.equals(\"inbound\") && recipientDialect == null)\n\tlanguage = \"auto\";\n\nexchange.setProperty(\"doTranslate\", false);\n\nif (body != null && body != \"\" && language != null) {\n\tString outputDialect = null;\n\tString inputDialect = null;\n\n\tif (direction.equals(\"outbound\")) {\n\t\tinputDialect = operatorDialect;\n\t\toutputDialect = language;\n\t} else if (direction.equals(\"inbound\")) {\n\t\tinputDialect = language;\n\t\toutputDialect = operatorDialect;\n\t}\n\t\n\ttry {\n\t\tSystem.out.println(\"inputDialect: \" + inputDialect);\n\t\tSystem.out.println(\"outputDialect: \" + outputDialect);\t\t\n\t\tif (!(inputDialect.equals(outputDialect))) {\n\t\t\tHashMap<String, String> translateReq = new HashMap<String, String>() {{\n\t\t\t\tput(\"input_text\", (String)exchange.getProperty(\"body\"));\n\t\t\t\tput(\"output_dialect\", outputDialect);\n\t\t\t}};\t\n\t\t\t\n\t\t\tif (!inputDialect.equals(\"auto\"))\n\t\t\t\ttranslateReq.put(\"input_dialect\", inputDialect);\n\t\t\t\n\t\t\texchange.setProperty(\"doTranslate\", true);\n\t\t\texchange.getIn().setBody(mapper.writeValueAsString(translateReq));\n\t\t}\n\t} catch (Exception e) {\n\t\tSystem.out.println(\"Warn: \" + e);\n\t}\n}&import=import com.fasterxml.jackson.databind.ObjectMapper;\nimport java.util.regex.Pattern;\nimport java.util.regex.Matcher;"
    }, {
      "name" : "messageFilter",
      "nodeId" : "bea6e4bb-e0f1-4977-b2bd-f98c43cf2242",
      "description" : "Translation Needed?",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "filter",
        "label" : "doTranslate==true",
        "route" : [ {
          "name" : "exchangePattern",
          "nodeId" : "1bf19aa1-042c-48a2-9e09-d80116ad8e53",
          "description" : "InOut",
          "properties" : {
            "_type" : "exchangePattern",
            "active" : true,
            "camelGroup" : "core",
            "exchangePattern" : "InOut",
            "name" : "exchangePattern",
            "url" : ""
          },
          "_type" : "exchangePattern",
          "kameletPropertiesUrl" : "?exchangePattern=InOut"
        }, {
          "name" : "try",
          "nodeId" : "b99adf96-dc63-4edf-be2b-7fb13677a7d5",
          "description" : "",
          "properties" : {
            "_type" : "try",
            "camelGroup" : "exception",
            "name" : "try",
            "url" : ""
          },
          "_type" : "try",
          "branches" : [ {
            "type" : "route",
            "label" : "route",
            "route" : [ {
              "name" : "log",
              "nodeId" : "779eebad-d4b4-4bc1-b1fe-af72904bd44b",
              "description" : "translate.out",
              "properties" : {
                "_type" : "log",
                "active" : true,
                "advancedParameters" : [ ],
                "camelGroup" : "component",
                "level" : "OFF",
                "logType" : "EIP",
                "loggerName" : "api.messages.translate.in",
                "message" : "(${header.CamelHttpResponseCode}) ${body}",
                "multiline" : false,
                "name" : "log",
                "showAll" : false,
                "showBody" : true,
                "showBodyType" : true,
                "showCaughtException" : false,
                "showExchangeId" : false,
                "showHeaders" : false,
                "showProperties" : false,
                "showStackTrace" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "log",
              "kameletPropertiesUrl" : "?level=OFF&logType=EIP&loggerName=api.messages.translate.in&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
            } ],
            "properties" : { }
          }, {
            "type" : "try",
            "label" : "try",
            "route" : [ {
              "name" : "dslProcessor",
              "nodeId" : "89e6eb5f-5d81-4879-a6d8-a960850a7b52",
              "description" : "Remove Headers",
              "properties" : {
                "_type" : "dslProcessor",
                "active" : true,
                "camelGroup" : "core",
                "dsl" : ".removeHeaders(\"*\", \"x-*\", \"Authorization\")",
                "name" : "dslProcessor",
                "url" : ""
              },
              "_type" : "dslProcessor",
              "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-*\", \"Authorization\")"
            }, {
              "name" : "setHeaders",
              "nodeId" : "2c86cbc6-8079-4d91-b227-5df3327d0953",
              "description" : "Set Request",
              "properties" : {
                "_type" : "setHeaders",
                "active" : true,
                "addNamespaces" : false,
                "camelGroup" : "core",
                "headerList" : [ {
                  "headerName" : "Content-Type",
                  "headerValue" : "application/json",
                  "language" : "Constant",
                  "uuid" : "780ac6c7-b5f7-4d16-a030-0ae594c7e8ca"
                }, {
                  "headerName" : "CamelHttpPath",
                  "headerValue" : "/api/v1/text_translate",
                  "language" : "Constant",
                  "uuid" : "701a0647-02b8-4b27-9c6c-8a263db9c765"
                } ],
                "name" : "setHeaders",
                "namespaces" : [ ],
                "suppressExceptions" : false,
                "url" : ""
              },
              "_type" : "setHeaders",
              "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
            }, {
              "name" : "log",
              "nodeId" : "40685928-ecae-4a1a-afe4-86dfd59aae1a",
              "description" : "206.direct.trans.in",
              "properties" : {
                "_type" : "log",
                "active" : true,
                "advancedParameters" : [ ],
                "camelGroup" : "component",
                "level" : "INFO",
                "logType" : "EIP",
                "loggerName" : "206.direct.trans.in",
                "message" : "${body}",
                "multiline" : false,
                "name" : "log",
                "showAll" : false,
                "showBody" : true,
                "showBodyType" : true,
                "showCaughtException" : false,
                "showExchangeId" : false,
                "showHeaders" : false,
                "showProperties" : false,
                "showStackTrace" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "log",
              "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.direct.trans.in&message=${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
            }, {
              "name" : "try",
              "nodeId" : "e2e19372-b365-4056-bb02-71ae46e45b5a",
              "description" : "",
              "properties" : {
                "_type" : "try",
                "camelGroup" : "exception",
                "name" : "try",
                "url" : ""
              },
              "_type" : "try",
              "branches" : [ {
                "type" : "try",
                "label" : "try",
                "route" : [ {
                  "name" : "http",
                  "nodeId" : "acdba1a9-2ad0-4252-b28d-6e143b2f21ee",
                  "description" : "POST /translate",
                  "properties" : {
                    "_type" : "http",
                    "active" : true,
                    "advancedParameters" : [ ],
                    "bridgeEndpoint" : true,
                    "camelGroup" : "component",
                    "connectTimeout" : "3000",
                    "connectionRequestTimeout" : "3000",
                    "disableStreamCache" : true,
                    "httpMethod" : "POST",
                    "httpUri" : "{{convey.api.host}}",
                    "name" : "http",
                    "scheme" : "https",
                    "socketTimeout" : "3000",
                    "throwExceptionOnFailure" : false,
                    "toDynamicEndpoint" : false,
                    "url" : ""
                  },
                  "_type" : "http",
                  "kameletPropertiesUrl" : "?bridgeEndpoint=true&connectTimeout=3000&connectionRequestTimeout=3000&disableStreamCache=true&httpMethod=POST&httpUri={{convey.api.host}}&socketTimeout=3000&throwExceptionOnFailure=false"
                }, {
                  "name" : "convertBodyTo",
                  "nodeId" : "2ac973b7-e3ee-415b-be65-30c6dd5b0a88",
                  "description" : "",
                  "properties" : {
                    "_type" : "convertBodyTo",
                    "active" : true,
                    "camelGroup" : "transform",
                    "name" : "convertBodyTo",
                    "targetClass" : "String.class",
                    "url" : ""
                  },
                  "_type" : "convertBodyTo",
                  "kameletPropertiesUrl" : "?targetClass=String.class"
                }, {
                  "name" : "log",
                  "nodeId" : "5d57be89-189a-4395-b9cf-f6dc664bad7e",
                  "description" : "206.direct.trans.out",
                  "properties" : {
                    "_type" : "log",
                    "active" : true,
                    "advancedParameters" : [ ],
                    "camelGroup" : "component",
                    "level" : "INFO",
                    "logType" : "EIP",
                    "loggerName" : "206.direct.trans.out",
                    "message" : "(${header.CamelHttpResponseCode}) ${body} ",
                    "multiline" : false,
                    "name" : "log",
                    "showAll" : false,
                    "showBody" : true,
                    "showBodyType" : true,
                    "showCaughtException" : false,
                    "showExchangeId" : false,
                    "showHeaders" : false,
                    "showProperties" : false,
                    "showStackTrace" : false,
                    "toDynamicEndpoint" : false,
                    "url" : ""
                  },
                  "_type" : "log",
                  "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.direct.trans.out&message=(${header.CamelHttpResponseCode}) ${body} &multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                }, {
                  "name" : "messageFilter",
                  "nodeId" : "e9e8d27f-5bb8-4a7b-a593-85daf4d96d52",
                  "description" : "OK?",
                  "properties" : {
                    "_type" : "messageFilter",
                    "active" : true,
                    "camelGroup" : "routing",
                    "name" : "messageFilter",
                    "url" : ""
                  },
                  "_type" : "messageFilter",
                  "branches" : [ {
                    "type" : "filter",
                    "label" : "200",
                    "route" : [ {
                      "name" : "setProperties",
                      "nodeId" : "597c7327-62e8-4409-9530-508899bc1e87",
                      "description" : "Get Translation",
                      "properties" : {
                        "_type" : "setProperties",
                        "active" : true,
                        "addNamespaces" : false,
                        "camelGroup" : "core",
                        "name" : "setProperties",
                        "namespaces" : [ ],
                        "propertyList" : [ {
                          "language" : "JsonPath",
                          "propertyName" : "bodyTransl",
                          "propertyValue" : "$.data[0].output_text",
                          "uuid" : "cbf88a65-f87a-43bc-9865-88e9bbb56303"
                        }, {
                          "language" : "JsonPath",
                          "propertyName" : "detectedDialect",
                          "propertyValue" : "$.data[0].detected_dialect",
                          "uuid" : "2db47fa7-c325-403d-b79c-8906d6f1c91e"
                        }, {
                          "language" : "JsonPath",
                          "propertyName" : "outputDialect",
                          "propertyValue" : "$.data[0].output_dialect",
                          "uuid" : "f4a48b40-76fa-4612-bbad-d0058478e775"
                        }, {
                          "language" : "JsonPath",
                          "propertyName" : "language",
                          "propertyValue" : "$.data[0].input_dialect",
                          "uuid" : "cbcda77c-1f27-42df-a12f-43bb2fabfd50"
                        } ],
                        "suppressExceptions" : true,
                        "url" : ""
                      },
                      "_type" : "setProperties",
                      "kameletPropertiesUrl" : "?bodyTransl=$.data[0].output_text&detectedDialect=$.data[0].detected_dialect&outputDialect=$.data[0].output_dialect&language=$.data[0].input_dialect&addNamespaces=false&suppressExceptions=true"
                    } ],
                    "properties" : {
                      "addNamespaces" : "false",
                      "condition" : "${header.CamelHttpResponseCode} == 200 && ${body} != null",
                      "language" : "Simple",
                      "namespaces" : [ ],
                      "suppressExceptions" : "false"
                    }
                  } ],
                  "kameletPropertiesUrl" : ""
                } ],
                "properties" : { }
              }, {
                "type" : "catch",
                "label" : "catch",
                "route" : [ {
                  "name" : "log",
                  "nodeId" : "ece6a15b-87c9-471e-a3a4-447bbf601c73",
                  "description" : "206.direct.trans.err",
                  "properties" : {
                    "_type" : "log",
                    "active" : true,
                    "advancedParameters" : [ ],
                    "camelGroup" : "component",
                    "level" : "ERROR",
                    "logType" : "EIP",
                    "loggerName" : "206.direct.trans.err",
                    "message" : "${exception}",
                    "multiline" : false,
                    "name" : "log",
                    "showAll" : false,
                    "showBody" : true,
                    "showBodyType" : true,
                    "showCaughtException" : false,
                    "showExchangeId" : false,
                    "showHeaders" : false,
                    "showProperties" : false,
                    "showStackTrace" : false,
                    "toDynamicEndpoint" : false,
                    "url" : ""
                  },
                  "_type" : "log",
                  "kameletPropertiesUrl" : "?level=ERROR&logType=EIP&loggerName=206.direct.trans.err&message=${exception}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
                } ],
                "properties" : {
                  "Exceptions" : "Exception"
                }
              } ],
              "kameletPropertiesUrl" : ""
            } ],
            "properties" : { }
          }, {
            "type" : "catch",
            "label" : "exception",
            "route" : [ {
              "name" : "log",
              "nodeId" : "c575e5e0-af2c-468e-9aa6-982ba8b89816",
              "description" : "err",
              "properties" : {
                "_type" : "log",
                "active" : true,
                "advancedParameters" : [ ],
                "camelGroup" : "component",
                "level" : "ERROR",
                "logType" : "EIP",
                "loggerName" : "api.messages.translate.err",
                "message" : "${exception.message}",
                "multiline" : false,
                "name" : "log",
                "showAll" : false,
                "showBody" : true,
                "showBodyType" : true,
                "showCaughtException" : false,
                "showExchangeId" : false,
                "showHeaders" : false,
                "showProperties" : false,
                "showStackTrace" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "log",
              "kameletPropertiesUrl" : "?level=ERROR&logType=EIP&loggerName=api.messages.translate.err&message=${exception.message}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
            } ],
            "properties" : {
              "Exceptions" : "org.apache.camel.ExchangeTimedOutException"
            }
          } ],
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${exchangeProperty.doTranslate} == true",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-6",
    "enabled" : true,
    "routeId" : 6,
    "route" : [ {
      "name" : "direct",
      "nodeId" : "ec126911-a687-4690-829e-5b69ae0c58a2",
      "description" : "enqueue-outbound-msg",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "enqueue-outbound-msg",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=enqueue-outbound-msg"
    }, {
      "name" : "messageFilter",
      "nodeId" : "28d48166-4c30-4d9c-a019-01251d5479eb",
      "description" : "SMS?",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "filter",
        "label" : "source==sms",
        "route" : [ {
          "name" : "exchangePattern",
          "nodeId" : "e9c29ede-cd5d-47dc-ab27-ac1b77375fb4",
          "description" : "InOnly",
          "properties" : {
            "_type" : "exchangePattern",
            "active" : true,
            "camelGroup" : "core",
            "exchangePattern" : "InOnly",
            "name" : "exchangePattern",
            "url" : ""
          },
          "_type" : "exchangePattern",
          "kameletPropertiesUrl" : "?exchangePattern=InOnly"
        }, {
          "name" : "setHeaders",
          "nodeId" : "7d9635d5-2817-4f64-b31b-071805ef8e20",
          "description" : "Set JMS Destination",
          "properties" : {
            "_type" : "setHeaders",
            "active" : true,
            "addNamespaces" : false,
            "camelGroup" : "core",
            "headerList" : [ {
              "headerName" : "CamelJmsDestinationName",
              "headerValue" : "providers.sms.${exchangeProperty.provider}",
              "language" : "Simple",
              "uuid" : "0f5897c8-ac6b-4df9-9bf5-fa15f28beb6d"
            } ],
            "name" : "setHeaders",
            "namespaces" : [ ],
            "suppressExceptions" : false,
            "url" : ""
          },
          "_type" : "setHeaders",
          "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
        }, {
          "name" : "dslProcessor",
          "nodeId" : "bb30b482-1c15-4599-834f-7fd9b7b73c1a",
          "description" : "To JSON",
          "properties" : {
            "_type" : "dslProcessor",
            "active" : true,
            "camelGroup" : "core",
            "dsl" : ".marshal().json(org.apache.camel.model.dataformat.JsonLibrary.Jackson)",
            "name" : "dslProcessor",
            "url" : ""
          },
          "_type" : "dslProcessor",
          "kameletPropertiesUrl" : "?dsl=.marshal().json(org.apache.camel.model.dataformat.JsonLibrary.Jackson)"
        }, {
          "name" : "log",
          "nodeId" : "5afc3d29-bb8b-438c-a1fe-a4f7534f7095",
          "description" : "206.direct.send.jms.in",
          "properties" : {
            "_type" : "log",
            "active" : true,
            "advancedParameters" : [ ],
            "camelGroup" : "component",
            "level" : "INFO",
            "logType" : "EIP",
            "loggerName" : "206.direct.send.jms.in",
            "message" : "Enqueuing to JMS queue: ${header.CamelJmsDestinationName}",
            "multiline" : false,
            "name" : "log",
            "showAll" : false,
            "showBody" : true,
            "showBodyType" : true,
            "showCaughtException" : false,
            "showExchangeId" : false,
            "showHeaders" : false,
            "showProperties" : false,
            "showStackTrace" : false,
            "toDynamicEndpoint" : false,
            "url" : ""
          },
          "_type" : "log",
          "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.direct.send.jms.in&message=Enqueuing to JMS queue: ${header.CamelJmsDestinationName}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
        }, {
          "name" : "jms",
          "nodeId" : "e0f01b22-ffb8-4bb9-88d3-a6a8cd6e41a8",
          "description" : "providers.sms.{provider}",
          "properties" : {
            "_type" : "jms",
            "active" : true,
            "advancedParameters" : [ ],
            "asyncConsumer" : false,
            "camelGroup" : "component",
            "concurrentConsumers" : "1",
            "connectionFactory" : "#pooledConnectionFactory",
            "destinationName" : "queue.dummy",
            "destinationType" : "queue",
            "exchangePattern" : "InOnly",
            "name" : "jms",
            "setConnectionFactory" : true,
            "toDynamicEndpoint" : false,
            "transacted" : false,
            "url" : ""
          },
          "_type" : "jms",
          "kameletPropertiesUrl" : "?asyncConsumer=false&concurrentConsumers=1&connectionFactory=#pooledConnectionFactory&destinationName=queue.dummy&destinationType=queue&exchangePattern=InOnly&setConnectionFactory=true&transacted=false"
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${exchangeProperty.source} == null || ${exchangeProperty.source} == 'sms'",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-7",
    "enabled" : false,
    "routeId" : 7,
    "route" : [ {
      "name" : "jms",
      "nodeId" : "c6e6b178-24e7-43b7-87de-89d47826bc6d",
      "description" : "message.status",
      "properties" : {
        "_type" : "jms",
        "active" : true,
        "advancedParameters" : [ ],
        "asyncConsumer" : false,
        "camelGroup" : "component",
        "concurrentConsumers" : "3",
        "connectionFactory" : "#pooledConnectionFactory",
        "destinationName" : "message.status",
        "destinationType" : "queue",
        "exchangePattern" : "InOnly",
        "name" : "jms",
        "setConnectionFactory" : true,
        "toDynamicEndpoint" : false,
        "transacted" : false,
        "url" : ""
      },
      "_type" : "jms",
      "kameletPropertiesUrl" : "?asyncConsumer=false&concurrentConsumers=3&connectionFactory=#pooledConnectionFactory&destinationName=message.status&destinationType=queue&exchangePattern=InOnly&setConnectionFactory=true&transacted=false"
    }, {
      "name" : "convertBodyTo",
      "nodeId" : "92ccadbc-2ed7-4aad-ba01-1a0fba0bc560",
      "description" : "To String",
      "properties" : {
        "_type" : "convertBodyTo",
        "active" : true,
        "camelGroup" : "transform",
        "name" : "convertBodyTo",
        "targetClass" : "String.class",
        "url" : ""
      },
      "_type" : "convertBodyTo",
      "kameletPropertiesUrl" : "?targetClass=String.class"
    }, {
      "name" : "setProperties",
      "nodeId" : "97be07e0-3dbe-48c9-a62f-142c3507c84a",
      "description" : "Get MessageStatus Params",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "JsonPath",
          "propertyName" : "conversationId",
          "propertyValue" : "$.conversation_id",
          "uuid" : "0fe1d890-22b3-4c89-91bd-b00e5d7ca975"
        }, {
          "language" : "JsonPath",
          "propertyName" : "messageId",
          "propertyValue" : "$.message_id",
          "uuid" : "71f0e381-6aa5-4236-8777-0d275a760f6e"
        }, {
          "language" : "JsonPath",
          "propertyName" : "errorCode",
          "propertyValue" : "$.error_code",
          "uuid" : "f254cf99-013b-4cd1-9fd9-8351a7dde533"
        }, {
          "language" : "JsonPath",
          "propertyName" : "errorMessage",
          "propertyValue" : "$.error_message",
          "uuid" : "95ffd411-a74b-463f-b7e3-3f55374060e9"
        }, {
          "language" : "JsonPath",
          "propertyName" : "numSegments",
          "propertyValue" : "$.num_segments",
          "uuid" : "e0951bcb-19a2-447b-8ef1-3b123db9cff6"
        }, {
          "language" : "JsonPath",
          "propertyName" : "status",
          "propertyValue" : "$.status",
          "uuid" : "16d6c705-bfeb-4cda-9bbc-f7f600c53da5"
        }, {
          "language" : "JsonPath",
          "propertyName" : "numMedia",
          "propertyValue" : "$.num_media",
          "uuid" : "3da495ac-a0ba-41e8-adf2-7de616403b03"
        }, {
          "language" : "JsonPath",
          "propertyName" : "resourceId",
          "propertyValue" : "$.resource_id",
          "uuid" : "69afaabf-6801-49e6-ad5c-63e5eb6ee4c6"
        }, {
          "language" : "Simple",
          "propertyName" : "requestBody",
          "propertyValue" : "${body}",
          "uuid" : "d7019b4e-d6b2-42b6-9524-15fb6d1cc9c3"
        } ],
        "suppressExceptions" : true,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?conversationId=$.conversation_id&messageId=$.message_id&errorCode=$.error_code&errorMessage=$.error_message&numSegments=$.num_segments&status=$.status&numMedia=$.num_media&resourceId=$.resource_id&requestBody=${body}&addNamespaces=false&suppressExceptions=true"
    }, {
      "name" : "setHeaders",
      "nodeId" : "bdd0c7c3-7533-42dd-89d1-d3235e15754f",
      "description" : "Set Topic Destination",
      "properties" : {
        "_type" : "setHeaders",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "headerList" : [ {
          "headerName" : "CamelJmsDestinationName",
          "headerValue" : "updateMessageStatus",
          "language" : "Constant",
          "uuid" : "b2fbad63-49cd-4ada-9a36-cef957431f8f"
        } ],
        "name" : "setHeaders",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setHeaders",
      "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "messagingEndpoint",
      "nodeId" : "bf5249ce-97e1-49d2-bb97-13180ba3173f",
      "description" : "SQL Update Message Status",
      "properties" : {
        "_type" : "messagingEndpoint",
        "active" : true,
        "camelGroup" : "core",
        "name" : "messagingEndpoint",
        "toDynamicEndpoint" : false,
        "uri" : "sql:UPDATE messages SET error_code = :#${exchangeProperty.errorCode}, error_message = :#${exchangeProperty.errorMessage}, status = :#${exchangeProperty.status}, updated_at = NOW() WHERE (resource_id IS NOT NULL AND resource_id = :#${exchangeProperty.resourceId}) OR id = CAST(:#${exchangeProperty.messageId} AS uuid) RETURNING agency_id?dataSource=#dsPostgres",
        "url" : ""
      },
      "_type" : "messagingEndpoint",
      "kameletPropertiesUrl" : "?uri=sql:UPDATE messages SET error_code = :#${exchangeProperty.errorCode}, error_message = :#${exchangeProperty.errorMessage}, status = :#${exchangeProperty.status}, updated_at = NOW() WHERE (resource_id IS NOT NULL AND resource_id = :#${exchangeProperty.resourceId}) OR id = CAST(:#${exchangeProperty.messageId} AS uuid) RETURNING agency_id?dataSource=#dsPostgres"
    }, {
      "name" : "setProperties",
      "nodeId" : "2bb7990e-3f67-4f03-bab5-6907b6e6e0cd",
      "description" : "Get Agency ID",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "Simple",
          "propertyName" : "agencyId",
          "propertyValue" : "${body[0][agency_id]}",
          "uuid" : "0e1f38f1-bff5-4e99-ba9a-be2ec3d560a4"
        } ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?agencyId=${body[0][agency_id]}&addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "process",
      "nodeId" : "70f7cb13-8115-42c3-8069-3d6a52f41d89",
      "description" : "Update JSON Response",
      "properties" : {
        "_type" : "process",
        "active" : true,
        "camelGroup" : "transform",
        "code" : "ObjectMapper mapper = new ObjectMapper();\nHashMap<String, Object> messageStatus = mapper.readValue((String)exchange.getProperty(\"requestBody\"), HashMap.class);\nString agencyId = (String)exchange.getProperty(\"agencyId\");\nmessageStatus.put(\"agency_id\", agencyId);\nexchange.getIn().setBody(mapper.writeValueAsString(messageStatus));",
        "import" : "import com.fasterxml.jackson.databind.ObjectMapper;",
        "name" : "process",
        "url" : ""
      },
      "_type" : "process",
      "kameletPropertiesUrl" : "?code=ObjectMapper mapper = new ObjectMapper();\nHashMap<String, Object> messageStatus = mapper.readValue((String)exchange.getProperty(\"requestBody\"), HashMap.class);\nString agencyId = (String)exchange.getProperty(\"agencyId\");\nmessageStatus.put(\"agency_id\", agencyId);\nexchange.getIn().setBody(mapper.writeValueAsString(messageStatus));&import=import com.fasterxml.jackson.databind.ObjectMapper;"
    }, {
      "name" : "seda",
      "nodeId" : "0e1359cd-6f12-4893-a6d4-c54a3822e768",
      "description" : "jms-publish-event",
      "properties" : {
        "_type" : "seda",
        "active" : true,
        "advancedParameters" : [ ],
        "blockWhenFull" : false,
        "camelGroup" : "core",
        "concurrentConsumers" : "1",
        "endpointName" : "jms-publish-event",
        "limitConcurrentConsumers" : true,
        "multipleConsumers" : false,
        "name" : "seda",
        "pollTimeout" : "1000",
        "size" : "1000",
        "specifyMaximumCapacitySize" : false,
        "timeout" : "30000",
        "toDynamicEndpoint" : false,
        "url" : "",
        "waitForTaskToComplete" : "Never"
      },
      "_type" : "seda",
      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=jms-publish-event&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=Never"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-3",
    "enabled" : true,
    "routeId" : 8,
    "route" : [ {
      "name" : "onException",
      "nodeId" : "07fa7332-2324-4bfd-ac53-d406459febbe",
      "description" : "",
      "properties" : {
        "_type" : "onException",
        "active" : true,
        "asyncDelayedRedelivery" : false,
        "camelGroup" : "exception",
        "exceptionBehavior" : "Handle the exceptions",
        "exceptionList" : [ {
          "exception" : "Exception"
        } ],
        "maximumRedeliveries" : "2",
        "name" : "onException",
        "redeliveryDelay" : "1000",
        "setRedeliveryDelay" : false,
        "setRedeliveryTriesCount" : false,
        "url" : "",
        "useOriginalMessage" : false
      },
      "_type" : "onException",
      "branches" : [ {
        "type" : "onException",
        "label" : "onException",
        "route" : [ {
          "name" : "log",
          "nodeId" : "49209bc8-040f-4398-8fe2-f553485b57b5",
          "description" : "",
          "properties" : {
            "_type" : "log",
            "active" : true,
            "advancedParameters" : [ ],
            "camelGroup" : "component",
            "level" : "ERROR",
            "logType" : "EIP",
            "loggerName" : "log",
            "message" : "${exception.stacktrace}",
            "multiline" : false,
            "name" : "log",
            "showAll" : false,
            "showBody" : true,
            "showBodyType" : true,
            "showCaughtException" : false,
            "showExchangeId" : false,
            "showHeaders" : false,
            "showProperties" : false,
            "showStackTrace" : false,
            "toDynamicEndpoint" : false,
            "url" : ""
          },
          "_type" : "log",
          "kameletPropertiesUrl" : "?level=ERROR&logType=EIP&loggerName=log&message=${exception.stacktrace}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
        }, {
          "name" : "setProperties",
          "nodeId" : "92c9b5db-9d66-4d2c-9924-159078c014be",
          "description" : "HTTP500",
          "properties" : {
            "_type" : "setProperties",
            "active" : true,
            "addNamespaces" : false,
            "camelGroup" : "core",
            "name" : "setProperties",
            "namespaces" : [ ],
            "propertyList" : [ {
              "language" : "Constant",
              "propertyName" : "error",
              "propertyValue" : "An error occurred processing the request. Please try again.",
              "uuid" : "a5441cf3-e4f6-4551-a78d-e153dc5ac1fa"
            }, {
              "language" : "Constant",
              "propertyName" : "CamelHttpResponseCode",
              "propertyValue" : "500",
              "uuid" : "69b19c10-95fe-4208-a5c2-a4c53e0fafee"
            } ],
            "suppressExceptions" : false,
            "url" : ""
          },
          "_type" : "setProperties",
          "kameletPropertiesUrl" : "?error=An error occurred processing the request. Please try again.&CamelHttpResponseCode=500&addNamespaces=false&suppressExceptions=false"
        }, {
          "name" : "dslProcessor",
          "nodeId" : "c92a1243-6131-46e0-a687-96a74627f82f",
          "description" : "Render Response",
          "properties" : {
            "_type" : "dslProcessor",
            "active" : true,
            "camelGroup" : "core",
            "dsl" : ".bean(\"renderResponse\")",
            "name" : "dslProcessor",
            "url" : ""
          },
          "_type" : "dslProcessor",
          "kameletPropertiesUrl" : "?dsl=.bean(\"renderResponse\")"
        }, {
          "name" : "stop",
          "nodeId" : "9fe5ad05-4d13-4afe-bccb-928a0cb28824",
          "description" : "",
          "properties" : {
            "_type" : "stop",
            "camelGroup" : "misc",
            "name" : "stop",
            "url" : ""
          },
          "_type" : "stop",
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : { }
      } ],
      "kameletPropertiesUrl" : "?asyncDelayedRedelivery=false&exceptionBehavior=Handle the exceptions&maximumRedeliveries=2&redeliveryDelay=1000&setRedeliveryDelay=false&setRedeliveryTriesCount=false&useOriginalMessage=false"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-10",
    "enabled" : true,
    "routeId" : 9,
    "route" : [ {
      "name" : "seda",
      "nodeId" : "a9597aa9-e18b-4263-b0c4-83108f547a5d",
      "description" : "jms-publish-event",
      "properties" : {
        "_type" : "seda",
        "active" : true,
        "advancedParameters" : [ ],
        "blockWhenFull" : false,
        "camelGroup" : "core",
        "concurrentConsumers" : "1",
        "endpointName" : "jms-publish-event",
        "limitConcurrentConsumers" : true,
        "multipleConsumers" : false,
        "name" : "seda",
        "pollTimeout" : "1000",
        "size" : "1000",
        "specifyMaximumCapacitySize" : false,
        "timeout" : "30000",
        "toDynamicEndpoint" : false,
        "url" : "",
        "waitForTaskToComplete" : "IfReplyExpected"
      },
      "_type" : "seda",
      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=jms-publish-event&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=IfReplyExpected"
    }, {
      "name" : "exchangePattern",
      "nodeId" : "526b60cf-99fc-4425-9cb1-e601d0e1040a",
      "description" : "InOnly",
      "properties" : {
        "_type" : "exchangePattern",
        "active" : true,
        "camelGroup" : "core",
        "exchangePattern" : "InOnly",
        "name" : "exchangePattern",
        "url" : ""
      },
      "_type" : "exchangePattern",
      "kameletPropertiesUrl" : "?exchangePattern=InOnly"
    }, {
      "name" : "log",
      "nodeId" : "315c21a0-d71b-4adf-b2d3-9fc45e16da48",
      "description" : "206.seda.io",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.seda.io",
        "message" : "Enqueuing Event ${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.seda.io&message=Enqueuing Event ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "26532a31-0253-440f-b81a-ca7a7ec99265",
      "description" : "Strip JMS Header",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".removeHeader('CamelJmsDestinationName')",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.removeHeader('CamelJmsDestinationName')"
    }, {
      "name" : "jms",
      "nodeId" : "a9c08ab3-9ec9-4c51-ad43-85931a90f2be",
      "description" : "Enque IO Event",
      "properties" : {
        "_type" : "jms",
        "active" : true,
        "advancedParameters" : [ ],
        "asyncConsumer" : false,
        "camelGroup" : "component",
        "concurrentConsumers" : "1",
        "connectionFactory" : "#pooledConnectionFactory",
        "destinationName" : "io.event",
        "destinationType" : "queue",
        "exchangePattern" : "InOnly",
        "name" : "jms",
        "setConnectionFactory" : true,
        "toDynamicEndpoint" : false,
        "transacted" : false,
        "url" : ""
      },
      "_type" : "jms",
      "kameletPropertiesUrl" : "?asyncConsumer=false&concurrentConsumers=1&connectionFactory=#pooledConnectionFactory&destinationName=io.event&destinationType=queue&exchangePattern=InOnly&setConnectionFactory=true&transacted=false"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-12",
    "enabled" : true,
    "routeId" : 10,
    "route" : [ {
      "name" : "direct",
      "nodeId" : "4a76c681-ad32-4589-8ce2-6cf0c6120067",
      "description" : "get-user-uuid",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "get-user-uuid",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=get-user-uuid"
    }, {
      "name" : "messageFilter",
      "nodeId" : "cc7a003e-60ea-41eb-b1cf-2e96c7a19a00",
      "description" : "",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "filter",
        "label" : "filter",
        "route" : [ {
          "name" : "messagingEndpoint",
          "nodeId" : "bbca9599-546e-452c-aebd-39e5f92cfd61",
          "description" : "SQL Get User UUID",
          "properties" : {
            "_type" : "messagingEndpoint",
            "active" : true,
            "camelGroup" : "core",
            "name" : "messagingEndpoint",
            "toDynamicEndpoint" : false,
            "uri" : "sql:SELECT id FROM users WHERE federated_id = :#${exchangeProperty.userId}?dataSource=#dsPostgres&OutputType=SelectOne",
            "url" : ""
          },
          "_type" : "messagingEndpoint",
          "kameletPropertiesUrl" : "?uri=sql:SELECT id FROM users WHERE federated_id = :#${exchangeProperty.userId}?dataSource=#dsPostgres&OutputType=SelectOne"
        }, {
          "name" : "setProperties",
          "nodeId" : "9ffa6cc5-cf19-41ce-8e80-4d18bda1bfb7",
          "description" : "Set User UUID",
          "properties" : {
            "_type" : "setProperties",
            "active" : true,
            "addNamespaces" : false,
            "camelGroup" : "core",
            "name" : "setProperties",
            "namespaces" : [ ],
            "propertyList" : [ {
              "language" : "Simple",
              "propertyName" : "operatorUuid",
              "propertyValue" : "${body}",
              "uuid" : "3eb60ca9-3605-4534-ab75-c63cc78067c6"
            } ],
            "suppressExceptions" : false,
            "url" : ""
          },
          "_type" : "setProperties",
          "kameletPropertiesUrl" : "?operatorUuid=${body}&addNamespaces=false&suppressExceptions=false"
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${exchangeProperty.direction} == 'outbound'",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-11",
    "enabled" : true,
    "routeId" : 11,
    "route" : [ {
      "name" : "seda",
      "nodeId" : "1ac1d8c3-1b05-4edc-86ee-5d6bd58e0df4",
      "description" : "sql-update-conversation",
      "properties" : {
        "_type" : "seda",
        "active" : true,
        "advancedParameters" : [ ],
        "blockWhenFull" : false,
        "camelGroup" : "core",
        "concurrentConsumers" : "10",
        "endpointName" : "sql-update-conversation",
        "limitConcurrentConsumers" : true,
        "multipleConsumers" : false,
        "name" : "seda",
        "pollTimeout" : "1000",
        "size" : "1000",
        "specifyMaximumCapacitySize" : false,
        "timeout" : "30000",
        "toDynamicEndpoint" : false,
        "url" : "",
        "waitForTaskToComplete" : "IfReplyExpected"
      },
      "_type" : "seda",
      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=10&endpointName=sql-update-conversation&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=IfReplyExpected"
    }, {
      "name" : "setProperties",
      "nodeId" : "736f2c54-18c9-4432-b0d3-cad394730f5a",
      "description" : "Set Recent Message",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "Simple",
          "propertyName" : "recentMessage",
          "propertyValue" : "${exchangeProperty.messageBody}",
          "uuid" : "6a3e1b68-f802-4f23-a928-73c668317d15"
        } ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?recentMessage=${exchangeProperty.messageBody}&addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "messageFilter",
      "nodeId" : "a323ebac-02b7-41d4-84de-6ab76f043074",
      "description" : "",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "route",
        "label" : "route",
        "route" : [ {
          "name" : "messagingEndpoint",
          "nodeId" : "19ef18e4-80be-48dd-a0fe-40cf6e88a122",
          "description" : "SQL Update Conversation",
          "properties" : {
            "_type" : "messagingEndpoint",
            "active" : true,
            "camelGroup" : "core",
            "name" : "messagingEndpoint",
            "toDynamicEndpoint" : false,
            "uri" : "sql:UPDATE conversations SET last_message_at = NOW(), recent_message = :#${exchangeProperty.recentMessage}, updated_at = NOW() WHERE id = CAST(:#${exchangeProperty.conversationId} AS uuid)?dataSource=#dsPostgres",
            "url" : ""
          },
          "_type" : "messagingEndpoint",
          "kameletPropertiesUrl" : "?uri=sql:UPDATE conversations SET last_message_at = NOW(), recent_message = :#${exchangeProperty.recentMessage}, updated_at = NOW() WHERE id = CAST(:#${exchangeProperty.conversationId} AS uuid)?dataSource=#dsPostgres"
        } ],
        "properties" : { }
      }, {
        "type" : "filter",
        "label" : "media && !body",
        "route" : [ {
          "name" : "setProperties",
          "nodeId" : "a2d96f1b-7041-4ef2-8a9c-7c65016f0c29",
          "description" : "Set Message",
          "properties" : {
            "_type" : "setProperties",
            "active" : true,
            "addNamespaces" : false,
            "camelGroup" : "core",
            "name" : "setProperties",
            "namespaces" : [ ],
            "propertyList" : [ {
              "language" : "Constant",
              "propertyName" : "recentMessage",
              "propertyValue" : "Sent an attachment",
              "uuid" : "26fe0eda-bdc6-4f89-a058-62c709df51cd"
            } ],
            "suppressExceptions" : false,
            "url" : ""
          },
          "_type" : "setProperties",
          "kameletPropertiesUrl" : "?recentMessage=Sent an attachment&addNamespaces=false&suppressExceptions=false"
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${exchangeProperty.messageBody} == '' && ${exchangeProperty.numMedia} > 0",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-12-4e170bdf",
    "enabled" : true,
    "routeId" : 12,
    "route" : [ {
      "name" : "seda",
      "nodeId" : "b9ea8266-25d8-4cb9-9d96-cdae06006245",
      "description" : "update-recipient",
      "properties" : {
        "_type" : "seda",
        "active" : true,
        "advancedParameters" : [ ],
        "blockWhenFull" : false,
        "camelGroup" : "core",
        "concurrentConsumers" : "10",
        "endpointName" : "update-recipient",
        "limitConcurrentConsumers" : true,
        "multipleConsumers" : false,
        "name" : "seda",
        "pollTimeout" : "1000",
        "size" : "1000",
        "specifyMaximumCapacitySize" : false,
        "timeout" : "30000",
        "toDynamicEndpoint" : false,
        "url" : "",
        "waitForTaskToComplete" : "IfReplyExpected"
      },
      "_type" : "seda",
      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=10&endpointName=update-recipient&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=IfReplyExpected"
    }, {
      "name" : "setHeaders",
      "nodeId" : "a1fd59e0-b9ca-4c16-9b0a-36f82c6e04e4",
      "description" : "Set Request",
      "properties" : {
        "_type" : "setHeaders",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "headerList" : [ {
          "headerName" : "CamelHttpPath",
          "headerValue" : "/api/v1/recipients/${exchangeProperty.recipientId}",
          "language" : "Simple",
          "uuid" : "0dc0e36d-7830-429b-979b-6ba1222d13f7"
        }, {
          "headerName" : "Content-Type",
          "headerValue" : "application/json",
          "language" : "Constant",
          "uuid" : "e7f4df66-bac1-4b81-926f-d932d06c1748"
        }, {
          "headerName" : "x-authorized",
          "headerValue" : "true",
          "language" : "Simple",
          "uuid" : "937ffc31-54da-4698-a719-244aca72147c"
        } ],
        "name" : "setHeaders",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setHeaders",
      "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "setBody",
      "nodeId" : "76d5683d-3f32-45a1-ad43-7d0037fe052b",
      "description" : "Set JSON Request",
      "properties" : {
        "_type" : "setBody",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "expression" : "{\"language\": \"${exchangeProperty.recipientLanguage}\", \"number\": \"${exchangeProperty.recipientNumber}\"}",
        "language" : "Simple",
        "name" : "setBody",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setBody",
      "kameletPropertiesUrl" : "?addNamespaces=false&expression={\"language\": \"${exchangeProperty.recipientLanguage}\", \"number\": \"${exchangeProperty.recipientNumber}\"}&language=Simple&suppressExceptions=false"
    }, {
      "name" : "log",
      "nodeId" : "ec0d4589-8794-47c8-953a-f915290e20ee",
      "description" : "recip.update.in",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.seda.recip.update.in",
        "message" : "PUT ${header.CamelHttpPath} ${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.seda.recip.update.in&message=PUT ${header.CamelHttpPath} ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "http",
      "nodeId" : "27f41c54-6516-4817-a6b8-5a63ede88125",
      "description" : "PUT /recipients",
      "properties" : {
        "_type" : "http",
        "active" : true,
        "advancedParameters" : [ ],
        "bridgeEndpoint" : true,
        "camelGroup" : "component",
        "connectTimeout" : "20000",
        "connectionRequestTimeout" : "20000",
        "disableStreamCache" : true,
        "httpMethod" : "PUT",
        "httpUri" : "{{convey.api.host}}",
        "name" : "http",
        "scheme" : "https",
        "socketTimeout" : "20000",
        "throwExceptionOnFailure" : true,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "http",
      "kameletPropertiesUrl" : "?bridgeEndpoint=true&connectTimeout=20000&connectionRequestTimeout=20000&disableStreamCache=true&httpMethod=PUT&httpUri={{convey.api.host}}&socketTimeout=20000&throwExceptionOnFailure=true"
    }, {
      "name" : "log",
      "nodeId" : "8b0c644e-6601-47ff-9368-803b51a1c467",
      "description" : "recip.update.out",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.seda.recip.update.out",
        "message" : "(${header.CamelHttpResponseCode}) ${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.seda.recip.update.out&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-13",
    "enabled" : true,
    "routeId" : 13,
    "route" : [ {
      "name" : "direct",
      "nodeId" : "6c982b5a-fbf7-43d1-a161-91306177040a",
      "description" : "detect-language",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "detect-language",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=detect-language"
    }, {
      "name" : "messageFilter",
      "nodeId" : "33b171f2-251c-4913-aa0a-f68acecc99c8",
      "description" : "has body",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "filter",
        "label" : "body != null",
        "route" : [ {
          "name" : "dslProcessor",
          "nodeId" : "eeaa595e-14ce-4932-a183-465cb760329d",
          "description" : "Remove Headers",
          "properties" : {
            "_type" : "dslProcessor",
            "active" : true,
            "camelGroup" : "core",
            "dsl" : ".removeHeaders(\"*\", \"x-\", \"Authorization\")",
            "name" : "dslProcessor",
            "url" : ""
          },
          "_type" : "dslProcessor",
          "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-\", \"Authorization\")"
        }, {
          "name" : "process",
          "nodeId" : "23cf5af3-166d-4a73-9fa5-f5a4ecfeecf0",
          "description" : "Set Request",
          "properties" : {
            "_type" : "process",
            "active" : true,
            "camelGroup" : "transform",
            "code" : "ObjectMapper jackson = new ObjectMapper();\nHashMap<String, String> request = new HashMap<String, String>() {{\n\tput(\"input_text\", (String)exchange.getProperty(\"body\"));\n}};\nexchange.getIn().setBody(jackson.writeValueAsString(request));",
            "import" : "import com.fasterxml.jackson.databind.ObjectMapper;",
            "name" : "process",
            "url" : ""
          },
          "_type" : "process",
          "kameletPropertiesUrl" : "?code=ObjectMapper jackson = new ObjectMapper();\nHashMap<String, String> request = new HashMap<String, String>() {{\n\tput(\"input_text\", (String)exchange.getProperty(\"body\"));\n}};\nexchange.getIn().setBody(jackson.writeValueAsString(request));&import=import com.fasterxml.jackson.databind.ObjectMapper;"
        }, {
          "name" : "setHeaders",
          "nodeId" : "4159bb08-bb05-4b1f-90a9-989a9837378b",
          "description" : "Set Detect Request",
          "properties" : {
            "_type" : "setHeaders",
            "active" : true,
            "addNamespaces" : false,
            "camelGroup" : "core",
            "headerList" : [ {
              "headerName" : "Content-Type",
              "headerValue" : "application/json",
              "language" : "Constant",
              "uuid" : "c3b2d744-8b4d-4e16-8419-791cb05f6cf3"
            }, {
              "headerName" : "x-agency-id",
              "headerValue" : "${exchangeProperty.agencyId}",
              "language" : "Simple",
              "uuid" : "3cdb4989-f9a1-4384-a365-43bd6cabaf3c"
            }, {
              "headerName" : "CamelHttpPath",
              "headerValue" : "/api/v1/text_translate",
              "language" : "Constant",
              "uuid" : "69fe28ab-bec2-4b25-9251-8ad2f676bbc0"
            }, {
              "headerName" : "x-authorized",
              "headerValue" : "true",
              "language" : "Simple",
              "uuid" : "d49f3973-f1d4-4cd4-951f-af51b5b6e985"
            } ],
            "name" : "setHeaders",
            "namespaces" : [ ],
            "suppressExceptions" : false,
            "url" : ""
          },
          "_type" : "setHeaders",
          "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
        }, {
          "name" : "log",
          "nodeId" : "2300bd21-9722-406f-a79d-94747c01c2c4",
          "description" : "206.dir.detect.in",
          "properties" : {
            "_type" : "log",
            "active" : true,
            "advancedParameters" : [ ],
            "camelGroup" : "component",
            "level" : "INFO",
            "logType" : "EIP",
            "loggerName" : "206.dir.detect.in",
            "message" : "PUT ${header.CamelHttpPath} ${body}",
            "multiline" : false,
            "name" : "log",
            "showAll" : false,
            "showBody" : true,
            "showBodyType" : true,
            "showCaughtException" : false,
            "showExchangeId" : false,
            "showHeaders" : false,
            "showProperties" : false,
            "showStackTrace" : false,
            "toDynamicEndpoint" : false,
            "url" : ""
          },
          "_type" : "log",
          "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.dir.detect.in&message=PUT ${header.CamelHttpPath} ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
        }, {
          "name" : "http",
          "nodeId" : "986319f5-f1a0-4715-aede-f20b6e048d04",
          "description" : "PUT /detect",
          "properties" : {
            "_type" : "http",
            "active" : true,
            "advancedParameters" : [ ],
            "bridgeEndpoint" : true,
            "camelGroup" : "component",
            "connectTimeout" : "20000",
            "connectionRequestTimeout" : "20000",
            "disableStreamCache" : true,
            "httpMethod" : "PUT",
            "httpUri" : "{{convey.api.host}}",
            "name" : "http",
            "scheme" : "https",
            "socketTimeout" : "20000",
            "throwExceptionOnFailure" : false,
            "toDynamicEndpoint" : false,
            "url" : ""
          },
          "_type" : "http",
          "kameletPropertiesUrl" : "?bridgeEndpoint=true&connectTimeout=20000&connectionRequestTimeout=20000&disableStreamCache=true&httpMethod=PUT&httpUri={{convey.api.host}}&socketTimeout=20000&throwExceptionOnFailure=false"
        }, {
          "name" : "convertBodyTo",
          "nodeId" : "0822e2d6-a6a2-40ab-acef-63df20942c79",
          "description" : "",
          "properties" : {
            "_type" : "convertBodyTo",
            "active" : true,
            "camelGroup" : "transform",
            "name" : "convertBodyTo",
            "targetClass" : "String.class",
            "url" : ""
          },
          "_type" : "convertBodyTo",
          "kameletPropertiesUrl" : "?targetClass=String.class"
        }, {
          "name" : "log",
          "nodeId" : "6d17ee8b-cdda-4a99-83c7-66da7ee53985",
          "description" : "206.dir.detect.out",
          "properties" : {
            "_type" : "log",
            "active" : true,
            "advancedParameters" : [ ],
            "camelGroup" : "component",
            "level" : "INFO",
            "logType" : "EIP",
            "loggerName" : "206.dir.detect.out",
            "message" : "(${header.CamelHttpResponseCode}) ${body}",
            "multiline" : false,
            "name" : "log",
            "showAll" : false,
            "showBody" : true,
            "showBodyType" : true,
            "showCaughtException" : false,
            "showExchangeId" : false,
            "showHeaders" : false,
            "showProperties" : false,
            "showStackTrace" : false,
            "toDynamicEndpoint" : false,
            "url" : ""
          },
          "_type" : "log",
          "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.dir.detect.out&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
        }, {
          "name" : "messageFilter",
          "nodeId" : "e2c02ae0-1985-49c7-a56c-0d0ed620a027",
          "description" : "OK?",
          "properties" : {
            "_type" : "messageFilter",
            "active" : true,
            "camelGroup" : "routing",
            "name" : "messageFilter",
            "url" : ""
          },
          "_type" : "messageFilter",
          "branches" : [ {
            "type" : "filter",
            "label" : "200",
            "route" : [ {
              "name" : "setProperties",
              "nodeId" : "33de2391-0496-4713-a196-01f80c770c6d",
              "description" : "Set Detected Lang",
              "properties" : {
                "_type" : "setProperties",
                "active" : true,
                "addNamespaces" : false,
                "camelGroup" : "core",
                "name" : "setProperties",
                "namespaces" : [ ],
                "propertyList" : [ {
                  "language" : "JsonPath",
                  "propertyName" : "detectedDialect",
                  "propertyValue" : "$.data[0]['detected_dialect']",
                  "uuid" : "a019b258-d82c-4562-80c5-a6bf1f058318"
                } ],
                "suppressExceptions" : true,
                "url" : ""
              },
              "_type" : "setProperties",
              "kameletPropertiesUrl" : "?detectedDialect=$.data[0]['detected_dialect']&addNamespaces=false&suppressExceptions=true"
            } ],
            "properties" : {
              "addNamespaces" : "false",
              "condition" : "${header.CamelHttpResponseCode} == 200",
              "language" : "Simple",
              "namespaces" : [ ],
              "suppressExceptions" : "false"
            }
          } ],
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${exchangeProperty.body} != null && ${exchangeProperty.body} != ''",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-14",
    "enabled" : true,
    "routeId" : 14,
    "route" : [ {
      "name" : "direct",
      "nodeId" : "cecc912b-4f7b-4c1c-b6dd-2efeb5648e30",
      "description" : "get-conversation",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "get-conversation",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=get-conversation"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "10eee686-24d2-46db-a476-be1782fae550",
      "description" : "Remove Headers",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".removeHeaders(\"*\", \"x-*\", \"Authorization\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-*\", \"Authorization\")"
    }, {
      "name" : "setHeaders",
      "nodeId" : "4eb1a55f-aa4e-4683-8213-66798d83e83e",
      "description" : "Set Request",
      "properties" : {
        "_type" : "setHeaders",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "headerList" : [ {
          "headerName" : "CamelHttpPath",
          "headerValue" : "/api/v1/conversations/${exchangeProperty.conversationId}",
          "language" : "Simple",
          "uuid" : "c077b2dd-f49b-4733-94cc-0f8202837faf"
        } ],
        "name" : "setHeaders",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setHeaders",
      "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "http",
      "nodeId" : "d23b7b99-05c8-446b-bab5-306514531b72",
      "description" : "GET /conversations",
      "properties" : {
        "_type" : "http",
        "active" : true,
        "advancedParameters" : [ ],
        "bridgeEndpoint" : true,
        "camelGroup" : "component",
        "connectTimeout" : "7000",
        "connectionRequestTimeout" : "7000",
        "disableStreamCache" : true,
        "httpMethod" : "GET",
        "httpUri" : "{{convey.api.host}}",
        "name" : "http",
        "scheme" : "https",
        "socketTimeout" : "7000",
        "throwExceptionOnFailure" : true,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "http",
      "kameletPropertiesUrl" : "?bridgeEndpoint=true&connectTimeout=7000&connectionRequestTimeout=7000&disableStreamCache=true&httpMethod=GET&httpUri={{convey.api.host}}&socketTimeout=7000&throwExceptionOnFailure=true"
    }, {
      "name" : "setProperties",
      "nodeId" : "125599f5-79a7-4762-b08f-c526efae9b36",
      "description" : "Set Recipients",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "JsonPath",
          "propertyName" : "recipients",
          "propertyValue" : "$.data.recipients",
          "uuid" : "0eaa18e0-a074-4c84-b2c5-6476375a5764"
        }, {
          "language" : "JsonPath",
          "propertyName" : "conversation",
          "propertyValue" : "$.data",
          "uuid" : "174ff47c-1c02-4941-ad54-5b756dcb1391"
        } ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?recipients=$.data.recipients&conversation=$.data&addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "process",
      "nodeId" : "6539087d-a1dc-4228-bd87-3086a3c2dfee",
      "description" : "Set Recipient",
      "properties" : {
        "_type" : "process",
        "active" : true,
        "camelGroup" : "transform",
        "code" : "ArrayList<HashMap<String, Object>> recipients = (ArrayList)exchange.getProperty(\"recipients\");\nString recipientId = (String)exchange.getProperty(\"recipientId\");\nString recipientLanguage;\nString recipientNumber;\n\nif (recipientId != null && recipients != null && recipients.size() > 0) {\n\tfor (int i = 0; i < recipients.size(); i++) {\n\t\tHashMap<String, Object> recipient = recipients.get(i);\n\t\tif (String.valueOf(recipient.get(\"recipient_id\")).equals(recipientId)) {\n\t\t\trecipientLanguage = (String)recipient.get(\"language\");\n\t\t\trecipientNumber = (String)recipient.get(\"number\");\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nif (recipientId == null && recipients != null && recipients.size() > 0) {\n\tHashMap<String, Object> recipient = recipients.get(0);\n\trecipientId = (String)recipient.get(\"recipient_id\");\n\trecipientLanguage = (String)recipient.get(\"language\");\n\trecipientNumber = (String)recipient.get(\"number\");\n}\n\nexchange.setProperty(\"recipientId\", recipientId);\nexchange.setProperty(\"recipientLanguage\", recipientLanguage);\nexchange.setProperty(\"recipientNumber\", recipientNumber);",
        "import" : "// import org.apache.camel.Message",
        "name" : "process",
        "url" : ""
      },
      "_type" : "process",
      "kameletPropertiesUrl" : "?code=ArrayList<HashMap<String, Object>> recipients = (ArrayList)exchange.getProperty(\"recipients\");\nString recipientId = (String)exchange.getProperty(\"recipientId\");\nString recipientLanguage;\nString recipientNumber;\n\nif (recipientId != null && recipients != null && recipients.size() > 0) {\n\tfor (int i = 0; i < recipients.size(); i++) {\n\t\tHashMap<String, Object> recipient = recipients.get(i);\n\t\tif (String.valueOf(recipient.get(\"recipient_id\")).equals(recipientId)) {\n\t\t\trecipientLanguage = (String)recipient.get(\"language\");\n\t\t\trecipientNumber = (String)recipient.get(\"number\");\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nif (recipientId == null && recipients != null && recipients.size() > 0) {\n\tHashMap<String, Object> recipient = recipients.get(0);\n\trecipientId = (String)recipient.get(\"recipient_id\");\n\trecipientLanguage = (String)recipient.get(\"language\");\n\trecipientNumber = (String)recipient.get(\"number\");\n}\n\nexchange.setProperty(\"recipientId\", recipientId);\nexchange.setProperty(\"recipientLanguage\", recipientLanguage);\nexchange.setProperty(\"recipientNumber\", recipientNumber);&import=// import org.apache.camel.Message"
    }, {
      "name" : "setProperties",
      "nodeId" : "ad6a45e1-13d4-466b-ba2c-f470c97de29f",
      "description" : "Set Conversation",
      "properties" : {
        "_type" : "setProperties",
        "active" : false,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "JsonPath",
          "propertyName" : "recipientId",
          "propertyValue" : "$.data.recipients[0].recipient_id",
          "uuid" : "b0857190-3fb4-424e-af65-9d2f15fe2e34"
        }, {
          "language" : "JsonPath",
          "propertyName" : "recipientLanguage",
          "propertyValue" : "$.data.recipients[0].language",
          "uuid" : "0e018499-5102-4a8c-9d92-0aa074624b4b"
        }, {
          "language" : "JsonPath",
          "propertyName" : "recipientNumber",
          "propertyValue" : "$.data.recipients[0].number",
          "uuid" : "b729bf4b-842d-4654-917e-c66147c06cc9"
        } ],
        "suppressExceptions" : true,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?recipientId=$.data.recipients[0].recipient_id&recipientLanguage=$.data.recipients[0].language&recipientNumber=$.data.recipients[0].number&addNamespaces=false&suppressExceptions=true"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-15",
    "enabled" : true,
    "routeId" : 15,
    "route" : [ {
      "name" : "putRequest",
      "nodeId" : "0b2c1186-b6bc-42c4-a174-6b08f4ac80c4",
      "description" : "updateMessageStatus",
      "properties" : {
        "_type" : "restApi",
        "active" : true,
        "camelGroup" : "rest",
        "consumes" : "application/json",
        "endpoint" : "/api/v1/messages/{messageId}/status",
        "method" : "put",
        "name" : "putRequest",
        "operationName" : "updateMessageStatus",
        "produces" : "application/json",
        "requestmethod" : "PUT",
        "url" : ""
      },
      "_type" : "restApi",
      "kameletPropertiesUrl" : "?consumes=application/json&endpoint=/api/v1/messages/{messageId}/status&method=put&operationName=updateMessageStatus&produces=application/json&requestmethod=PUT"
    }, {
      "name" : "convertBodyTo",
      "nodeId" : "93d3597b-b053-4299-b4f4-0bc744997263",
      "description" : "",
      "properties" : {
        "_type" : "convertBodyTo",
        "active" : true,
        "camelGroup" : "transform",
        "name" : "convertBodyTo",
        "targetClass" : "String.class",
        "url" : ""
      },
      "_type" : "convertBodyTo",
      "kameletPropertiesUrl" : "?targetClass=String.class"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "303ab620-99bc-4e27-a81e-3206a900ca19",
      "description" : "Validate JWT",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.bean('validateJwt')\n    .filter().simple('${exchangeProperty.jwtAuth} != true')\n        .stop()\n    .end()"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "857babf9-3b79-41b1-86d5-b10a1c2a58ac",
      "description" : "Validate Request",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.to(\"bean:validateRequest\")\n.filter().simple('${header.CamelHttpResponseCode} >= 400')\n\t.bean('renderResponse')\n  .log(LoggingLevel.WARN, 'log', '${header.CamelHttpResponseCode} ${body}')\t\n        .stop()\n    .end()"
    }, {
      "name" : "log",
      "nodeId" : "3942340d-22c0-4672-87b0-c44c33d2b4d5",
      "description" : "206.api.status.in",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.api.status.in",
        "message" : "PUT ${header.CamelHttpPath} ${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.api.status.in&message=PUT ${header.CamelHttpPath} ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "setProperties",
      "nodeId" : "1dcab702-0779-4f65-bc46-3a8cc1452465",
      "description" : "Get Input Params",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "Header",
          "propertyName" : "messageId",
          "propertyValue" : "messageId",
          "uuid" : "8a36065d-91e9-4ddf-8170-62778de962d2"
        }, {
          "language" : "JsonPath",
          "propertyName" : "conversationId",
          "propertyValue" : "$.conversation_id",
          "uuid" : "93ac45ba-5118-40ad-a4bd-d2d1c16c29cc"
        }, {
          "language" : "JsonPath",
          "propertyName" : "errorCode",
          "propertyValue" : "$.error_code",
          "uuid" : "7da23640-5acc-4e0e-8d14-570c203e3987"
        }, {
          "language" : "JsonPath",
          "propertyName" : "errorMessage",
          "propertyValue" : "$.error_message",
          "uuid" : "e1a8f765-effe-4ed3-ad59-6b5fbde6f26a"
        }, {
          "language" : "JsonPath",
          "propertyName" : "numSegments",
          "propertyValue" : "$.num_segments",
          "uuid" : "6f44cd79-34d8-43eb-b682-d06c1c82e56c"
        }, {
          "language" : "JsonPath",
          "propertyName" : "status",
          "propertyValue" : "$.status",
          "uuid" : "c6301e76-e914-43f5-8ddd-657213784f24"
        }, {
          "language" : "JsonPath",
          "propertyName" : "numMedia",
          "propertyValue" : "$.num_media",
          "uuid" : "36146736-74de-412e-85e9-c34e6ad66cbe"
        }, {
          "language" : "JsonPath",
          "propertyName" : "resourceId",
          "propertyValue" : "$.resource_id",
          "uuid" : "7ee23900-ffac-48f8-98be-2410e6e8bc65"
        }, {
          "language" : "Simple",
          "propertyName" : "requestBody",
          "propertyValue" : "${body}",
          "uuid" : "41ce0631-739d-4e4c-a40b-18bda5915b53"
        } ],
        "suppressExceptions" : true,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?messageId=messageId&conversationId=$.conversation_id&errorCode=$.error_code&errorMessage=$.error_message&numSegments=$.num_segments&status=$.status&numMedia=$.num_media&resourceId=$.resource_id&requestBody=${body}&addNamespaces=false&suppressExceptions=true"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "90f654a3-985f-48d9-8685-b2c9cdb5d191",
      "description" : "Remove Headers",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".removeHeaders(\"*\", \"x-*\", \"Authorization\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-*\", \"Authorization\")"
    }, {
      "name" : "messageFilter",
      "nodeId" : "19977605-ffa3-470b-af72-c40c797fa365",
      "description" : "",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "route",
        "label" : "route",
        "route" : [ {
          "name" : "messagingEndpoint",
          "nodeId" : "a23b1e06-0e4e-4202-8804-8d0094a80000",
          "description" : "SQL Update Status",
          "properties" : {
            "_type" : "messagingEndpoint",
            "active" : true,
            "camelGroup" : "core",
            "name" : "messagingEndpoint",
            "toDynamicEndpoint" : false,
            "uri" : "sql:UPDATE messages SET error_code = :#${exchangeProperty.errorCode}, error_message = :#${exchangeProperty.errorMessage}, status = :#${exchangeProperty.status}, resource_id = COALESCE(:#${exchangeProperty.resourceId}, resource_id), updated_at = NOW() WHERE id = CAST(:#${exchangeProperty.messageId} AS uuid) RETURNING agency_id, conversation_id, resource_id, num_retries?dataSource=#dsPostgres",
            "url" : ""
          },
          "_type" : "messagingEndpoint",
          "kameletPropertiesUrl" : "?uri=sql:UPDATE messages SET error_code = :#${exchangeProperty.errorCode}, error_message = :#${exchangeProperty.errorMessage}, status = :#${exchangeProperty.status}, resource_id = COALESCE(:#${exchangeProperty.resourceId}, resource_id), updated_at = NOW() WHERE id = CAST(:#${exchangeProperty.messageId} AS uuid) RETURNING agency_id, conversation_id, resource_id, num_retries?dataSource=#dsPostgres"
        }, {
          "name" : "messageFilter",
          "nodeId" : "17a63200-6af6-4010-b20e-6382ec9e8292",
          "description" : "",
          "properties" : {
            "_type" : "messageFilter",
            "active" : true,
            "camelGroup" : "routing",
            "name" : "messageFilter",
            "url" : ""
          },
          "_type" : "messageFilter",
          "branches" : [ {
            "type" : "route",
            "label" : "route",
            "route" : [ {
              "name" : "setProperties",
              "nodeId" : "978e483c-c800-4d37-ab57-986bc1f5aaa0",
              "description" : "Get Message Attrs",
              "properties" : {
                "_type" : "setProperties",
                "active" : true,
                "addNamespaces" : false,
                "camelGroup" : "core",
                "name" : "setProperties",
                "namespaces" : [ ],
                "propertyList" : [ {
                  "language" : "Simple",
                  "propertyName" : "agencyId",
                  "propertyValue" : "${body[0][agency_id]}",
                  "uuid" : "06c79684-e0e6-4b4e-b795-64b77ca511c0"
                }, {
                  "language" : "Simple",
                  "propertyName" : "conversationId",
                  "propertyValue" : "${body[0][conversation_id]}",
                  "uuid" : "7c5590e7-979d-480b-931d-fd8c9dfda53a"
                }, {
                  "language" : "Simple",
                  "propertyName" : "resourceId",
                  "propertyValue" : "${body[0][resource_id]}",
                  "uuid" : "18a9bc6b-50aa-467f-88bc-d076eeeba9bf"
                }, {
                  "language" : "Simple",
                  "propertyName" : "numRetries",
                  "propertyValue" : "${body[0][num_retries]}",
                  "uuid" : "ec956295-aa9e-4603-9f08-b78f29cb2cd0"
                } ],
                "suppressExceptions" : false,
                "url" : ""
              },
              "_type" : "setProperties",
              "kameletPropertiesUrl" : "?agencyId=${body[0][agency_id]}&conversationId=${body[0][conversation_id]}&resourceId=${body[0][resource_id]}&numRetries=${body[0][num_retries]}&addNamespaces=false&suppressExceptions=false"
            }, {
              "name" : "messagingEndpoint",
              "nodeId" : "21c4d8c4-8195-41b5-9e30-1fed75266f02",
              "description" : "SQL Add Status",
              "properties" : {
                "_type" : "messagingEndpoint",
                "active" : true,
                "camelGroup" : "core",
                "name" : "messagingEndpoint",
                "toDynamicEndpoint" : false,
                "uri" : "sql:INSERT INTO message_status (message_id, status, request, created_at, updated_at) VALUES (CAST(:#${exchangeProperty.messageId} AS uuid), :#${exchangeProperty.status}, :#${exchangeProperty.requestBody}, NOW(), NOW())?dataSource=#dsPostgres",
                "url" : ""
              },
              "_type" : "messagingEndpoint",
              "kameletPropertiesUrl" : "?uri=sql:INSERT INTO message_status (message_id, status, request, created_at, updated_at) VALUES (CAST(:#${exchangeProperty.messageId} AS uuid), :#${exchangeProperty.status}, :#${exchangeProperty.requestBody}, NOW(), NOW())?dataSource=#dsPostgres"
            }, {
              "name" : "process",
              "nodeId" : "7232816c-065e-44c9-99c5-8263e34e3515",
              "description" : "Set JSON Response",
              "properties" : {
                "_type" : "process",
                "active" : true,
                "camelGroup" : "transform",
                "code" : "HashMap<String, Object> messageStatus = new HashMap<String, Object>() {{\n\tput(\"agency_id\", (String)exchange.getProperty(\"agencyId\"));\n\tput(\"conversation_id\", (String)exchange.getProperty(\"conversationId\"));\n\tput(\"resource_id\", (String)exchange.getProperty(\"resourceId\"));\n\tput(\"message_id\", (String)exchange.getProperty(\"messageId\"));\t\n\tput(\"status\", (String)exchange.getProperty(\"status\"));\t\n\tput(\"num_retries\", (Integer)exchange.getProperty(\"numRetries\"));\n}};\n\nexchange.getIn().setBody(messageStatus);",
                "import" : "import com.fasterxml.jackson.databind.ObjectMapper;",
                "name" : "process",
                "url" : ""
              },
              "_type" : "process",
              "kameletPropertiesUrl" : "?code=HashMap<String, Object> messageStatus = new HashMap<String, Object>() {{\n\tput(\"agency_id\", (String)exchange.getProperty(\"agencyId\"));\n\tput(\"conversation_id\", (String)exchange.getProperty(\"conversationId\"));\n\tput(\"resource_id\", (String)exchange.getProperty(\"resourceId\"));\n\tput(\"message_id\", (String)exchange.getProperty(\"messageId\"));\t\n\tput(\"status\", (String)exchange.getProperty(\"status\"));\t\n\tput(\"num_retries\", (Integer)exchange.getProperty(\"numRetries\"));\n}};\n\nexchange.getIn().setBody(messageStatus);&import=import com.fasterxml.jackson.databind.ObjectMapper;"
            }, {
              "name" : "dslProcessor",
              "nodeId" : "9a58a3b4-c2bc-4a0b-9ff0-110800930a3e",
              "description" : "Render Response",
              "properties" : {
                "_type" : "dslProcessor",
                "active" : true,
                "camelGroup" : "core",
                "dsl" : ".bean('renderResponse')",
                "name" : "dslProcessor",
                "url" : ""
              },
              "_type" : "dslProcessor",
              "kameletPropertiesUrl" : "?dsl=.bean('renderResponse')"
            }, {
              "name" : "log",
              "nodeId" : "74701181-4998-43a7-ac19-a9c0d6114279",
              "description" : "206.api.status.out",
              "properties" : {
                "_type" : "log",
                "active" : true,
                "advancedParameters" : [ ],
                "camelGroup" : "component",
                "level" : "INFO",
                "logType" : "EIP",
                "loggerName" : "206.api.status.out",
                "message" : "(${header.CamelHttpResponseCode}) ${body}",
                "multiline" : false,
                "name" : "log",
                "showAll" : false,
                "showBody" : true,
                "showBodyType" : true,
                "showCaughtException" : false,
                "showExchangeId" : false,
                "showHeaders" : false,
                "showProperties" : false,
                "showStackTrace" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "log",
              "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.api.status.out&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
            }, {
              "name" : "seda",
              "nodeId" : "79b65d5c-f79f-4be9-8c46-4e86eb38613a",
              "description" : "publish-io-event",
              "properties" : {
                "_type" : "seda",
                "active" : true,
                "advancedParameters" : [ ],
                "blockWhenFull" : false,
                "camelGroup" : "core",
                "concurrentConsumers" : "1",
                "endpointName" : "publish-io-event",
                "limitConcurrentConsumers" : true,
                "multipleConsumers" : false,
                "name" : "seda",
                "pollTimeout" : "1000",
                "size" : "1000",
                "specifyMaximumCapacitySize" : false,
                "timeout" : "30000",
                "toDynamicEndpoint" : false,
                "url" : "",
                "waitForTaskToComplete" : "Never"
              },
              "_type" : "seda",
              "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=publish-io-event&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=Never"
            } ],
            "properties" : { }
          }, {
            "type" : "filter",
            "label" : "404",
            "route" : [ {
              "name" : "setProperties",
              "nodeId" : "2eea9774-590d-46b4-a2d3-915eef2dece6",
              "description" : "Set Error",
              "properties" : {
                "_type" : "setProperties",
                "active" : true,
                "addNamespaces" : false,
                "camelGroup" : "core",
                "name" : "setProperties",
                "namespaces" : [ ],
                "propertyList" : [ {
                  "language" : "Constant",
                  "propertyName" : "CamelHttpResponseCode",
                  "propertyValue" : "404",
                  "uuid" : "f0212f31-2410-48dd-b7d0-e540262b6d8e"
                }, {
                  "language" : "Constant",
                  "propertyName" : "error",
                  "propertyValue" : "Not found",
                  "uuid" : "71e38226-12a0-41b3-a84f-f6aea5ad7e74"
                } ],
                "suppressExceptions" : false,
                "url" : ""
              },
              "_type" : "setProperties",
              "kameletPropertiesUrl" : "?CamelHttpResponseCode=404&error=Not found&addNamespaces=false&suppressExceptions=false"
            }, {
              "name" : "dslProcessor",
              "nodeId" : "d78aec3b-8b3f-4e9b-8817-e53dd5ad5f2d",
              "description" : "Render Response",
              "properties" : {
                "_type" : "dslProcessor",
                "active" : true,
                "camelGroup" : "core",
                "dsl" : ".bean('renderResponse')",
                "name" : "dslProcessor",
                "url" : ""
              },
              "_type" : "dslProcessor",
              "kameletPropertiesUrl" : "?dsl=.bean('renderResponse')"
            }, {
              "name" : "log",
              "nodeId" : "b4f56e75-b490-4113-a07d-17181d5c0b2f",
              "description" : "206.api.status.404",
              "properties" : {
                "_type" : "log",
                "active" : true,
                "advancedParameters" : [ ],
                "camelGroup" : "component",
                "level" : "INFO",
                "logType" : "EIP",
                "loggerName" : "206.api.status.404",
                "message" : "(${header.CamelHttpResponseCode}) ${body}",
                "multiline" : false,
                "name" : "log",
                "showAll" : false,
                "showBody" : true,
                "showBodyType" : true,
                "showCaughtException" : false,
                "showExchangeId" : false,
                "showHeaders" : false,
                "showProperties" : false,
                "showStackTrace" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "log",
              "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.api.status.404&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
            }, {
              "name" : "stop",
              "nodeId" : "ac875963-9fd0-4235-b8cd-b942efcca5cb",
              "description" : "",
              "properties" : {
                "_type" : "stop",
                "camelGroup" : "misc",
                "name" : "stop",
                "url" : ""
              },
              "_type" : "stop",
              "kameletPropertiesUrl" : ""
            } ],
            "properties" : {
              "addNamespaces" : "false",
              "condition" : "${header. CamelSqlRowCount} == 0",
              "language" : "Simple",
              "namespaces" : [ ],
              "suppressExceptions" : "false"
            }
          } ],
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : { }
      }, {
        "type" : "filter",
        "label" : "undelivered?",
        "route" : [ {
          "name" : "messagingEndpoint",
          "nodeId" : "56b2dbae-f9d3-4847-9683-3f5b3f3fc47e",
          "description" : "SQL Increment Retries",
          "properties" : {
            "_type" : "messagingEndpoint",
            "active" : true,
            "camelGroup" : "core",
            "name" : "messagingEndpoint",
            "toDynamicEndpoint" : false,
            "uri" : "sql:UPDATE messages SET num_retries = COALESCE(num_retries, 1) + 1, updated_at = NOW() WHERE id = CAST(:#${exchangeProperty.messageId} AS uuid) AND (num_retries IS NULL OR num_retries < 5) RETURNING agency_id, num_retries?dataSource=#dsPostgres",
            "url" : ""
          },
          "_type" : "messagingEndpoint",
          "kameletPropertiesUrl" : "?uri=sql:UPDATE messages SET num_retries = COALESCE(num_retries, 1) + 1, updated_at = NOW() WHERE id = CAST(:#${exchangeProperty.messageId} AS uuid) AND (num_retries IS NULL OR num_retries < 5) RETURNING agency_id, num_retries?dataSource=#dsPostgres"
        }, {
          "name" : "messageFilter",
          "nodeId" : "e75fa48d-bbb7-45b6-911f-3d0da0829e76",
          "description" : "Retry Count < 5",
          "properties" : {
            "_type" : "messageFilter",
            "active" : true,
            "camelGroup" : "routing",
            "name" : "messageFilter",
            "url" : ""
          },
          "_type" : "messageFilter",
          "branches" : [ {
            "type" : "filter",
            "label" : "filter",
            "route" : [ {
              "name" : "setProperties",
              "nodeId" : "e1add4c9-c3aa-4930-8e47-8436a6441ee3",
              "description" : "Get Retry Count",
              "properties" : {
                "_type" : "setProperties",
                "active" : true,
                "addNamespaces" : false,
                "camelGroup" : "core",
                "name" : "setProperties",
                "namespaces" : [ ],
                "propertyList" : [ {
                  "language" : "Simple",
                  "propertyName" : "numRetries",
                  "propertyValue" : "${body[0][num_retries]}",
                  "uuid" : "e762ba24-ab95-4f4c-bd5c-936a8c1b519a"
                }, {
                  "language" : "Simple",
                  "propertyName" : "agencyId",
                  "propertyValue" : "${body[0][agency_id]}",
                  "uuid" : "a593fd68-4edb-4435-b9fa-609b5fcafe8d"
                }, {
                  "language" : "Simple",
                  "propertyName" : "status",
                  "propertyValue" : "sending",
                  "uuid" : "c382055b-1115-4499-adc1-af9d5403c291"
                } ],
                "suppressExceptions" : false,
                "url" : ""
              },
              "_type" : "setProperties",
              "kameletPropertiesUrl" : "?numRetries=${body[0][num_retries]}&agencyId=${body[0][agency_id]}&status=sending&addNamespaces=false&suppressExceptions=false"
            }, {
              "name" : "seda",
              "nodeId" : "a438f703-e4d8-4cf0-833d-fd7b6b671850",
              "description" : "retry-message",
              "properties" : {
                "_type" : "seda",
                "active" : true,
                "advancedParameters" : [ ],
                "blockWhenFull" : false,
                "camelGroup" : "core",
                "concurrentConsumers" : "1",
                "endpointName" : "retry-message",
                "limitConcurrentConsumers" : true,
                "multipleConsumers" : false,
                "name" : "seda",
                "pollTimeout" : "1000",
                "size" : "1000",
                "specifyMaximumCapacitySize" : false,
                "timeout" : "30000",
                "toDynamicEndpoint" : false,
                "url" : "",
                "waitForTaskToComplete" : "Never"
              },
              "_type" : "seda",
              "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=retry-message&limitConcurrentConsumers=true&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=Never"
            } ],
            "properties" : {
              "addNamespaces" : "false",
              "condition" : "${header[CamelSqlRowCount]} == 1 && ${body[0][num_retries]} < 10",
              "language" : "Simple",
              "namespaces" : [ ],
              "suppressExceptions" : "false"
            }
          } ],
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${exchangeProperty.status} == \"undelivered\"",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-16",
    "enabled" : true,
    "routeId" : 16,
    "route" : [ {
      "name" : "seda",
      "nodeId" : "21eca08a-8d2d-4b15-80c6-c892a01352ff",
      "description" : "publish-io-event",
      "properties" : {
        "_type" : "seda",
        "active" : true,
        "advancedParameters" : [ ],
        "blockWhenFull" : false,
        "camelGroup" : "core",
        "concurrentConsumers" : "15",
        "endpointName" : "publish-io-event",
        "limitConcurrentConsumers" : false,
        "multipleConsumers" : true,
        "name" : "seda",
        "pollTimeout" : "1000",
        "size" : "1000",
        "specifyMaximumCapacitySize" : false,
        "timeout" : "30000",
        "toDynamicEndpoint" : false,
        "url" : "",
        "waitForTaskToComplete" : "IfReplyExpected"
      },
      "_type" : "seda",
      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=15&endpointName=publish-io-event&limitConcurrentConsumers=false&multipleConsumers=true&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=IfReplyExpected"
    }, {
      "name" : "exchangePattern",
      "nodeId" : "c05a99c7-989d-4230-a427-f3145aecfdc3",
      "description" : "InOnly",
      "properties" : {
        "_type" : "exchangePattern",
        "active" : true,
        "camelGroup" : "core",
        "exchangePattern" : "InOnly",
        "name" : "exchangePattern",
        "url" : ""
      },
      "_type" : "exchangePattern",
      "kameletPropertiesUrl" : "?exchangePattern=InOnly"
    }, {
      "name" : "log",
      "nodeId" : "df88797e-cba2-40c4-b6c6-684a730f4a65",
      "description" : "206.jms.io.in",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "OFF",
        "logType" : "EIP",
        "loggerName" : "206.jms.io.in",
        "message" : "${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=OFF&logType=EIP&loggerName=206.jms.io.in&message=${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "jms",
      "nodeId" : "6f043165-5829-494f-9cc2-f185f646e882",
      "description" : "io.event",
      "properties" : {
        "_type" : "jms",
        "active" : true,
        "advancedParameters" : [ ],
        "asyncConsumer" : false,
        "camelGroup" : "component",
        "concurrentConsumers" : "1",
        "connectionFactory" : "#pooledConnectionFactory",
        "destinationName" : "io.event",
        "destinationType" : "queue",
        "exchangePattern" : "InOnly",
        "name" : "jms",
        "setConnectionFactory" : true,
        "toDynamicEndpoint" : false,
        "transacted" : false,
        "url" : ""
      },
      "_type" : "jms",
      "kameletPropertiesUrl" : "?asyncConsumer=false&concurrentConsumers=1&connectionFactory=#pooledConnectionFactory&destinationName=io.event&destinationType=queue&exchangePattern=InOnly&setConnectionFactory=true&transacted=false"
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-17",
    "enabled" : true,
    "routeId" : 17,
    "route" : [ {
      "name" : "seda",
      "nodeId" : "b5b13355-3e13-4763-993e-1636fc33197b",
      "description" : "send-autoreply",
      "properties" : {
        "_type" : "seda",
        "active" : true,
        "advancedParameters" : [ ],
        "blockWhenFull" : false,
        "camelGroup" : "core",
        "concurrentConsumers" : "1",
        "endpointName" : "send-autoreply",
        "limitConcurrentConsumers" : false,
        "multipleConsumers" : false,
        "name" : "seda",
        "pollTimeout" : "1000",
        "size" : "1000",
        "specifyMaximumCapacitySize" : false,
        "timeout" : "30000",
        "toDynamicEndpoint" : false,
        "url" : "",
        "waitForTaskToComplete" : "IfReplyExpected"
      },
      "_type" : "seda",
      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=send-autoreply&limitConcurrentConsumers=false&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=IfReplyExpected"
    }, {
      "name" : "messageFilter",
      "nodeId" : "245c34d0-103e-439f-af63-08b5ab5dd759",
      "description" : "Inbound?",
      "properties" : {
        "_type" : "messageFilter",
        "active" : true,
        "camelGroup" : "routing",
        "name" : "messageFilter",
        "url" : ""
      },
      "_type" : "messageFilter",
      "branches" : [ {
        "type" : "filter",
        "label" : "direction==inbound",
        "route" : [ {
          "name" : "messagingEndpoint",
          "nodeId" : "0060fcef-bbf6-4675-bb01-23de3aca2ebd",
          "description" : "SQL Check First Message",
          "properties" : {
            "_type" : "messagingEndpoint",
            "active" : true,
            "camelGroup" : "core",
            "name" : "messagingEndpoint",
            "toDynamicEndpoint" : false,
            "uri" : "sql:SELECT id FROM messages WHERE conversation_id = CAST(:#${exchangeProperty.conversationId} AS uuid) AND (source = \\'sms\\' OR source IS NULL) ORDER BY created_at ASC LIMIT 1?dataSource=#dsPostgres&OutputType=SelectOne",
            "url" : ""
          },
          "_type" : "messagingEndpoint",
          "kameletPropertiesUrl" : "?uri=sql:SELECT id FROM messages WHERE conversation_id = CAST(:#${exchangeProperty.conversationId} AS uuid) AND (source = \\'sms\\' OR source IS NULL) ORDER BY created_at ASC LIMIT 1?dataSource=#dsPostgres&OutputType=SelectOne"
        }, {
          "name" : "messageFilter",
          "nodeId" : "b19c9bb6-e281-40f6-888f-dce963e15bd5",
          "description" : "First Message?",
          "properties" : {
            "_type" : "messageFilter",
            "active" : true,
            "camelGroup" : "routing",
            "name" : "messageFilter",
            "url" : ""
          },
          "_type" : "messageFilter",
          "branches" : [ {
            "type" : "filter",
            "label" : "body != messageId",
            "route" : [ {
              "name" : "dslProcessor",
              "nodeId" : "6fd09dcb-9620-4274-bb3a-0efc32e2e852",
              "description" : "Remove Headers",
              "properties" : {
                "_type" : "dslProcessor",
                "active" : true,
                "camelGroup" : "core",
                "dsl" : ".removeHeaders(\"*\", \"x-*\", \"Authorization\")",
                "name" : "dslProcessor",
                "url" : ""
              },
              "_type" : "dslProcessor",
              "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-*\", \"Authorization\")"
            }, {
              "name" : "setHeaders",
              "nodeId" : "90cf7831-e2c1-499d-9a43-4e7434a388b2",
              "description" : "Set Request",
              "properties" : {
                "_type" : "setHeaders",
                "active" : true,
                "addNamespaces" : false,
                "camelGroup" : "core",
                "headerList" : [ {
                  "headerName" : "CamelHttpPath",
                  "headerValue" : "/api/v1/messages",
                  "language" : "Constant",
                  "uuid" : "857390d4-6766-4142-9814-100cba788bf5"
                }, {
                  "headerName" : "Content-Type",
                  "headerValue" : "application/json",
                  "language" : "Constant",
                  "uuid" : "4f436f6f-1b0d-440f-aaa9-a29d5f66b08f"
                } ],
                "name" : "setHeaders",
                "namespaces" : [ ],
                "suppressExceptions" : false,
                "url" : ""
              },
              "_type" : "setHeaders",
              "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
            }, {
              "name" : "messagingEndpoint",
              "nodeId" : "9d500604-610f-4657-857d-6dc8bd0b3ad0",
              "description" : "SQL Get Auto Reply",
              "properties" : {
                "_type" : "messagingEndpoint",
                "active" : true,
                "camelGroup" : "core",
                "name" : "messagingEndpoint",
                "toDynamicEndpoint" : false,
                "uri" : "sql:SELECT COALESCE(s_1.value, s.value) AS value FROM settings s LEFT JOIN object_settings s_1 on s.id = s_1.setting_id WHERE s_1.object_id = CAST(:#${exchangeProperty.agencyId} AS uuid) AND s.component = \\'agency\\' AND s.name = \\'inboundConversationReceiptMessage\\' LIMIT 1?dataSource=#dsPostgres&OutputType=SelectOne",
                "url" : ""
              },
              "_type" : "messagingEndpoint",
              "kameletPropertiesUrl" : "?uri=sql:SELECT COALESCE(s_1.value, s.value) AS value FROM settings s LEFT JOIN object_settings s_1 on s.id = s_1.setting_id WHERE s_1.object_id = CAST(:#${exchangeProperty.agencyId} AS uuid) AND s.component = \\'agency\\' AND s.name = \\'inboundConversationReceiptMessage\\' LIMIT 1?dataSource=#dsPostgres&OutputType=SelectOne"
            }, {
              "name" : "process",
              "nodeId" : "906f20fe-8190-4caa-8ab8-64fccaaa428e",
              "description" : "Set Request JSON",
              "properties" : {
                "_type" : "process",
                "active" : true,
                "camelGroup" : "transform",
                "code" : "HashMap<String, String> requestJson = new HashMap<String, String>() {{\n\tput(\"body\", (String)exchange.getIn().getBody());\n\tput(\"direction\", \"outbound\");\n\tput(\"source\", \"sms\");\n\tput(\"conversation_id\", (String)exchange.getProperty(\"conversationId\"));\n}};\n\nObjectMapper mapper = new ObjectMapper();\nexchange.getIn().setBody(mapper.writeValueAsString(requestJson));",
                "import" : "import com.fasterxml.jackson.databind.ObjectMapper;",
                "name" : "process",
                "url" : ""
              },
              "_type" : "process",
              "kameletPropertiesUrl" : "?code=HashMap<String, String> requestJson = new HashMap<String, String>() {{\n\tput(\"body\", (String)exchange.getIn().getBody());\n\tput(\"direction\", \"outbound\");\n\tput(\"source\", \"sms\");\n\tput(\"conversation_id\", (String)exchange.getProperty(\"conversationId\"));\n}};\n\nObjectMapper mapper = new ObjectMapper();\nexchange.getIn().setBody(mapper.writeValueAsString(requestJson));&import=import com.fasterxml.jackson.databind.ObjectMapper;"
            }, {
              "name" : "log",
              "nodeId" : "12a656ac-c0b6-4ffd-ad1a-57ba540b2dfe",
              "description" : "206.seda.autoreply.api.in",
              "properties" : {
                "_type" : "log",
                "active" : true,
                "advancedParameters" : [ ],
                "camelGroup" : "component",
                "level" : "INFO",
                "logType" : "EIP",
                "loggerName" : "206.seda.autoreply.api.in",
                "message" : "POST ${header.CamelHttpPath} ${body}",
                "multiline" : false,
                "name" : "log",
                "showAll" : false,
                "showBody" : true,
                "showBodyType" : true,
                "showCaughtException" : false,
                "showExchangeId" : false,
                "showHeaders" : false,
                "showProperties" : false,
                "showStackTrace" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "log",
              "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.seda.autoreply.api.in&message=POST ${header.CamelHttpPath} ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
            }, {
              "name" : "http",
              "nodeId" : "cf544b14-dd2a-4af2-ac4f-d8622f5987ea",
              "description" : "POST /messages",
              "properties" : {
                "_type" : "http",
                "active" : true,
                "advancedParameters" : [ ],
                "bridgeEndpoint" : true,
                "camelGroup" : "component",
                "connectTimeout" : "20000",
                "connectionRequestTimeout" : "20000",
                "disableStreamCache" : true,
                "httpMethod" : "POST",
                "httpUri" : "{{convey.api.host}}",
                "name" : "http",
                "scheme" : "https",
                "socketTimeout" : "20000",
                "throwExceptionOnFailure" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "http",
              "kameletPropertiesUrl" : "?bridgeEndpoint=true&connectTimeout=20000&connectionRequestTimeout=20000&disableStreamCache=true&httpMethod=POST&httpUri={{convey.api.host}}&socketTimeout=20000&throwExceptionOnFailure=false"
            }, {
              "name" : "log",
              "nodeId" : "807af64e-3994-4d27-b4ce-0a81102ff1c5",
              "description" : "seda.autoreply.api.out",
              "properties" : {
                "_type" : "log",
                "active" : true,
                "advancedParameters" : [ ],
                "camelGroup" : "component",
                "level" : "INFO",
                "logType" : "EIP",
                "loggerName" : "log",
                "message" : "(${header.CamelHttpResponseCode}) ${body}",
                "multiline" : false,
                "name" : "log",
                "showAll" : false,
                "showBody" : true,
                "showBodyType" : true,
                "showCaughtException" : false,
                "showExchangeId" : false,
                "showHeaders" : false,
                "showProperties" : false,
                "showStackTrace" : false,
                "toDynamicEndpoint" : false,
                "url" : ""
              },
              "_type" : "log",
              "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=log&message=(${header.CamelHttpResponseCode}) ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
            } ],
            "properties" : {
              "addNamespaces" : "false",
              "condition" : "${header.CamelSqlRowCount} == 1 && ${body} == ${exchangeProperty.messageId}",
              "language" : "Simple",
              "namespaces" : [ ],
              "suppressExceptions" : "false"
            }
          } ],
          "kameletPropertiesUrl" : ""
        } ],
        "properties" : {
          "addNamespaces" : "false",
          "condition" : "${exchangeProperty.direction} == \"inbound\"",
          "language" : "Simple",
          "namespaces" : [ ],
          "suppressExceptions" : "false"
        }
      } ],
      "kameletPropertiesUrl" : ""
    } ]
  }, {
    "id" : null,
    "camelRouteId" : "route-18",
    "enabled" : true,
    "routeId" : 18,
    "route" : [ {
      "name" : "seda",
      "nodeId" : "608a93b0-a733-4ad4-909d-b6fad445b651",
      "description" : "retry-message",
      "properties" : {
        "_type" : "seda",
        "active" : true,
        "advancedParameters" : [ ],
        "blockWhenFull" : false,
        "camelGroup" : "core",
        "concurrentConsumers" : "1",
        "endpointName" : "retry-message",
        "limitConcurrentConsumers" : false,
        "multipleConsumers" : false,
        "name" : "seda",
        "pollTimeout" : "1000",
        "size" : "1000",
        "specifyMaximumCapacitySize" : false,
        "timeout" : "30000",
        "toDynamicEndpoint" : false,
        "url" : "",
        "waitForTaskToComplete" : "IfReplyExpected"
      },
      "_type" : "seda",
      "kameletPropertiesUrl" : "?blockWhenFull=false&concurrentConsumers=1&endpointName=retry-message&limitConcurrentConsumers=false&multipleConsumers=false&pollTimeout=1000&size=1000&specifyMaximumCapacitySize=false&timeout=30000&waitForTaskToComplete=IfReplyExpected"
    }, {
      "name" : "process",
      "nodeId" : "0785cca3-d9f8-4c45-8333-821acee912e3",
      "description" : "Set Delay",
      "properties" : {
        "_type" : "process",
        "active" : true,
        "camelGroup" : "transform",
        "code" : "int numRetries = (Integer)exchange.getProperty(\"numRetries\");\nif (numRetries == null)\n\tnumRetries = 1;\n\nexchange.setProperty(\"delayInterval\", 355 * numRetries);",
        "import" : "// import org.apache.camel.Message",
        "name" : "process",
        "url" : ""
      },
      "_type" : "process",
      "kameletPropertiesUrl" : "?code=int numRetries = (Integer)exchange.getProperty(\"numRetries\");\nif (numRetries == null)\n\tnumRetries = 1;\n\nexchange.setProperty(\"delayInterval\", 355 * numRetries);&import=// import org.apache.camel.Message"
    }, {
      "name" : "delay",
      "nodeId" : "2e614238-6425-4a8e-adbe-b47f674600f4",
      "description" : "",
      "properties" : {
        "_type" : "delay",
        "active" : true,
        "addNamespaces" : false,
        "asyncDelayed" : false,
        "camelGroup" : "misc",
        "expression" : "${exchangeProperty.delayInterval}",
        "language" : "Simple",
        "name" : "delay",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "timeToWait" : "Expression",
        "url" : "",
        "value" : "1255"
      },
      "_type" : "delay",
      "kameletPropertiesUrl" : "?addNamespaces=false&asyncDelayed=false&expression=${exchangeProperty.delayInterval}&language=Simple&suppressExceptions=false&timeToWait=Expression&value=1255"
    }, {
      "name" : "setHeaders",
      "nodeId" : "594e31fb-882a-4601-b532-ff27e05878d5",
      "description" : "Set messageId",
      "properties" : {
        "_type" : "setHeaders",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "headerList" : [ {
          "headerName" : "messageId",
          "headerValue" : "${exchangeProperty.messageId}",
          "language" : "Simple",
          "uuid" : "75ddb52c-358e-4d06-b5d3-a4b30378c48b"
        }, {
          "headerName" : "x-agency-id",
          "headerValue" : "${exchangeProperty.agencyId}",
          "language" : "Simple",
          "uuid" : "1ad12558-c0ba-47bb-903d-5b3fb24794b8"
        } ],
        "name" : "setHeaders",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setHeaders",
      "kameletPropertiesUrl" : "?addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "direct",
      "nodeId" : "f0d61021-4f98-4bce-85b3-e8335e7c9aea",
      "description" : "Get Message By ID",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "getMessageById",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=getMessageById"
    }, {
      "name" : "setProperties",
      "nodeId" : "a93ee36b-c268-4383-9b77-5a9710ec89e5",
      "description" : "Set Message Props",
      "properties" : {
        "_type" : "setProperties",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "name" : "setProperties",
        "namespaces" : [ ],
        "propertyList" : [ {
          "language" : "JsonPath",
          "propertyName" : "source",
          "propertyValue" : "$.data.source",
          "uuid" : "e3903ba0-ea97-4019-8303-a497cdf15e60"
        }, {
          "language" : "JsonPath",
          "propertyName" : "provider",
          "propertyValue" : "$.data.provider",
          "uuid" : "fa43cabb-251a-4830-a182-e5ea056484a2"
        } ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setProperties",
      "kameletPropertiesUrl" : "?source=$.data.source&provider=$.data.provider&addNamespaces=false&suppressExceptions=false"
    }, {
      "name" : "setBody",
      "nodeId" : "bb31cba2-51e0-47f1-bbc9-2c54afee89ee",
      "description" : "Set Message JSON",
      "properties" : {
        "_type" : "setBody",
        "active" : true,
        "addNamespaces" : false,
        "camelGroup" : "core",
        "expression" : "$.data",
        "language" : "JsonPath",
        "name" : "setBody",
        "namespaces" : [ ],
        "suppressExceptions" : false,
        "url" : ""
      },
      "_type" : "setBody",
      "kameletPropertiesUrl" : "?addNamespaces=false&expression=$.data&language=JsonPath&suppressExceptions=false"
    }, {
      "name" : "log",
      "nodeId" : "a6031bdb-611e-4355-aee7-e9a172342610",
      "description" : "206.seda.retry",
      "properties" : {
        "_type" : "log",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "component",
        "level" : "INFO",
        "logType" : "EIP",
        "loggerName" : "206.seda.retry",
        "message" : "Requeuing Message ${body}",
        "multiline" : false,
        "name" : "log",
        "showAll" : false,
        "showBody" : true,
        "showBodyType" : true,
        "showCaughtException" : false,
        "showExchangeId" : false,
        "showHeaders" : false,
        "showProperties" : false,
        "showStackTrace" : false,
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "log",
      "kameletPropertiesUrl" : "?level=INFO&logType=EIP&loggerName=206.seda.retry&message=Requeuing Message ${body}&multiline=false&showAll=false&showBody=true&showBodyType=true&showCaughtException=false&showExchangeId=false&showHeaders=false&showProperties=false&showStackTrace=false"
    }, {
      "name" : "dslProcessor",
      "nodeId" : "1b489c1f-05cd-4c16-96aa-3cb084325c09",
      "description" : "Remove Headers",
      "properties" : {
        "_type" : "dslProcessor",
        "active" : true,
        "camelGroup" : "core",
        "dsl" : ".removeHeaders(\"*\", \"x-*\", \"Authorization\")",
        "name" : "dslProcessor",
        "url" : ""
      },
      "_type" : "dslProcessor",
      "kameletPropertiesUrl" : "?dsl=.removeHeaders(\"*\", \"x-*\", \"Authorization\")"
    }, {
      "name" : "direct",
      "nodeId" : "ed0d8684-8b40-4359-99af-e7182bf1e4e8",
      "description" : "enqueue-outbound-msg",
      "properties" : {
        "_type" : "direct",
        "active" : true,
        "advancedParameters" : [ ],
        "camelGroup" : "core",
        "endpointName" : "enqueue-outbound-msg",
        "name" : "direct",
        "toDynamicEndpoint" : false,
        "url" : ""
      },
      "_type" : "direct",
      "kameletPropertiesUrl" : "?endpointName=enqueue-outbound-msg"
    } ]
  } ],
  "traits" : [ {
    "name" : "health",
    "configuration" : {
      "enabled" : true,
      "livenessProbeEnabled" : true,
      "readinessProbeEnabled" : true
    }
  } ],
  "id" : "6fa68a9f-a788-46aa-80e3-7722bd4b394e",
  "name" : "r206-messages-api",
  "description" : "Messages REST API",
  "createdAt" : "2023-10-04T18:05:07.804378019",
  "updatedAt" : "2023-10-04T18:05:07.804381133",
  "createdBy" : "612c1b37-217d-49f9-b344-54b8af760f6a",
  "updatedBy" : "612c1b37-217d-49f9-b344-54b8af760f6a"
}